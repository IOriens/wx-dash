<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>WXML节点布局相交状态</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="wxml&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x76F8;&#x4EA4;&#x72B6;&#x6001;">WXML&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x76F8;&#x4EA4;&#x72B6;&#x6001;</h1>
<p>&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x4EA4;&#x53C9;&#x72B6;&#x6001;API&#x53EF;&#x7528;&#x4E8E;&#x76D1;&#x542C;&#x4E24;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EC4;&#x4EF6;&#x8282;&#x70B9;&#x5728;&#x5E03;&#x5C40;&#x4F4D;&#x7F6E;&#x4E0A;&#x7684;&#x76F8;&#x4EA4;&#x72B6;&#x6001;&#x3002;&#x8FD9;&#x4E00;&#x7EC4;API&#x5E38;&#x5E38;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x63A8;&#x65AD;&#x67D0;&#x4E9B;&#x8282;&#x70B9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6237;&#x770B;&#x89C1;&#x3001;&#x6709;&#x591A;&#x5927;&#x6BD4;&#x4F8B;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6237;&#x770B;&#x89C1;&#x3002;</p>
<p>&#x8FD9;&#x4E00;&#x7EC4;API&#x6D89;&#x53CA;&#x7684;&#x4E3B;&#x8981;&#x6982;&#x5FF5;&#x5982;&#x4E0B;&#x3002;</p>
<ul>
<li>&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF1A;&#x76D1;&#x542C;&#x7684;&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF0C;&#x53D6;&#x5B83;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x3002;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x4F1A;&#x53D6;&#x5B83;&#x4EEC;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684; <strong>&#x4EA4;&#x96C6;</strong> &#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x3002;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x4E5F;&#x53EF;&#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x4E4B;&#x4E00;&#x3002;</li>
<li>&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF1A;&#x76D1;&#x542C;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x53EA;&#x80FD;&#x662F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;</li>
<li>&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#xFF1A;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x4E0E;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x7684;&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x3002;</li>
<li>&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;&#xFF1A;&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;&#x3002;</li>
<li>&#x9608;&#x503C;&#xFF1A;&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;&#x5982;&#x679C;&#x8FBE;&#x5230;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x4F1A;&#x89E6;&#x53D1;&#x76D1;&#x542C;&#x5668;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;&#x9608;&#x503C;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x3002;</li>
</ul>
<p>&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5728;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.target-class</code> &#x6307;&#x5B9A;&#xFF09;&#x6BCF;&#x6B21;&#x8FDB;&#x5165;&#x6216;&#x79BB;&#x5F00;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x65F6;&#xFF0C;&#x89E6;&#x53D1;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</strong></p>
<pre><code class="lang-js">Page({
  onLoad: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    wx.createIntersectionObserver().relativeToViewport().observe(<span class="hljs-string">&apos;.target-class&apos;</span>, (res) =&gt; {
      res.intersectionRatio <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;</span>
      res.intersectionRect <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;</span>
      res.intersectionRect.left <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5DE6;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.top <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x4E0A;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.width <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5BBD;&#x5EA6;</span>
      res.intersectionRect.height <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x9AD8;&#x5EA6;</span>
    })
  }
})
</code></pre>
<p>&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5728;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.target-class</code> &#x6307;&#x5B9A;&#xFF09;&#x4E0E;&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.relative-class</code> &#x6307;&#x5B9A;&#xFF09;&#x5728;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x5185;&#x76F8;&#x4EA4;&#x6216;&#x76F8;&#x79BB;&#xFF0C;&#x4E14;&#x76F8;&#x4EA4;&#x6216;&#x76F8;&#x79BB;&#x7A0B;&#x5EA6;&#x8FBE;&#x5230;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;20%&#x548C;50%&#x65F6;&#xFF0C;&#x89E6;&#x53D1;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</strong></p>
<pre><code class="lang-js">Page({
  onLoad: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    wx.createIntersectionObserver({
      thresholds: [<span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span>]
    }).relativeTo(<span class="hljs-string">&apos;.relative-class&apos;</span>).relativeToViewport().observe(<span class="hljs-string">&apos;.target-class&apos;</span>, (res) =&gt; {
      res.intersectionRatio <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;</span>
      res.intersectionRect <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;</span>
      res.intersectionRect.left <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5DE6;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.top <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x4E0A;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.width <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5BBD;&#x5EA6;</span>
      res.intersectionRect.height <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x9AD8;&#x5EA6;</span>
    })
  }
})
</code></pre>
<h2 id="wxcreateintersectionobserverthis-options">wx.createIntersectionObserver([this], [options])</h2>
<blockquote>
<p>&#x57FA;&#x7840;&#x5E93; 1.9.3 &#x5F00;&#x59CB;&#x652F;&#x6301;&#xFF0C;&#x4F4E;&#x7248;&#x672C;&#x9700;&#x505A;<a href="../framework/compatibility.html">&#x517C;&#x5BB9;&#x5904;&#x7406;</a></p>
</blockquote>
<p>&#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; IntersectionObserver &#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x3002;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>this.createIntersectionObserver([options])</code> &#x6765;&#x4EE3;&#x66FF;&#x3002;</p>
<p><strong>&#x53EF;&#x9009;&#x7684; options &#xFF1A;</strong></p>
<table>
<thead>
<tr>
<th>&#x5B57;&#x6BB5;&#x540D;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td>thresholds</td>
<td>Array</td>
<td>&#x4E00;&#x4E2A;&#x6570;&#x503C;&#x6570;&#x7EC4;&#xFF0C;&#x5305;&#x542B;&#x6240;&#x6709;&#x9608;&#x503C;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>[0]</code> &#x3002;</td>
</tr>
<tr>
<td>initialRatio</td>
<td>Number</td>
<td>&#x521D;&#x59CB;&#x7684;&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x8C03;&#x7528;&#x65F6;&#x68C0;&#x6D4B;&#x5230;&#x7684;&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;&#x4E0E;&#x8FD9;&#x4E2A;&#x503C;&#x4E0D;&#x76F8;&#x7B49;&#x4E14;&#x8FBE;&#x5230;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x76D1;&#x542C;&#x5668;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>0</code> &#x3002;</td>
</tr>
</tbody>
</table>
<h3 id="intersectionobserverrelativetoselector-margins">intersectionObserver.relativeTo(selector, [margins])</h3>
<p>&#x4F7F;&#x7528;&#x9009;&#x62E9;&#x5668;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x4E4B;&#x4E00;&#x3002; <code>margins</code> &#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6269;&#x5C55;&#xFF08;&#x6216;&#x6536;&#x7F29;&#xFF09;&#x53C2;&#x7167;&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x53EF;&#x5305;&#x542B; <code>left</code> &#x3001; <code>right</code> &#x3001; <code>top</code> &#x3001; <code>bottom</code> &#x56DB;&#x9879;&#x3002;</p>
<h3 id="intersectionobserverrelativetoviewportmargins">intersectionObserver.relativeToViewport([margins])</h3>
<p>&#x6307;&#x5B9A;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x4E4B;&#x4E00;&#x3002; <code>margins</code> &#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6269;&#x5C55;&#xFF08;&#x6216;&#x6536;&#x7F29;&#xFF09;&#x53C2;&#x7167;&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x53EF;&#x5305;&#x542B; <code>left</code> &#x3001; <code>right</code> &#x3001; <code>top</code> &#x3001; <code>bottom</code> &#x56DB;&#x9879;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.target-class</code> &#x6307;&#x5B9A;&#xFF09;&#x8FDB;&#x5165;&#x663E;&#x793A;&#x533A;&#x57DF;&#x4EE5;&#x4E0B; 100px &#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="lang-js">Page({
  onLoad: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    wx.createIntersectionObserver().relativeToViewport({bottom: <span class="hljs-number">100</span>}).observe(<span class="hljs-string">&apos;.target-class&apos;</span>, (res) =&gt; {
      res.intersectionRatio <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;</span>
      res.intersectionRect <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;</span>
      res.intersectionRect.left <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5DE6;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.top <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x4E0A;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.width <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5BBD;&#x5EA6;</span>
      res.intersectionRect.height <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x9AD8;&#x5EA6;</span>
    })
  }
})
</code></pre>
<h3 id="intersectionobserverobservetargetselector-callback">intersectionObserver.observe(targetSelector, callback)</h3>
<p>&#x6307;&#x5B9A;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x5E76;&#x5F00;&#x59CB;&#x76D1;&#x542C;&#x76F8;&#x4EA4;&#x72B6;&#x6001;&#x53D8;&#x5316;&#x60C5;&#x51B5;&#x3002;&#x56DE;&#x8C03;&#x51FD;&#x6570; <code>callback</code> &#x5305;&#x542B;&#x4E00;&#x4E2A;&#x53C2;&#x6570; <code>result</code> &#x3002;</p>
<p><strong>&#x56DE;&#x8C03;&#x51FD;&#x6570; result &#x5305;&#x542B;&#x7684;&#x5B57;&#x6BB5;&#xFF1A;</strong></p>
<table>
<thead>
<tr>
<th>&#x5B57;&#x6BB5;&#x540D;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td>intersectionRatio</td>
<td>Number</td>
<td>&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;</td>
</tr>
<tr>
<td>intersectionRect</td>
<td>Object</td>
<td>&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x5305;&#x542B; <code>left</code> &#x3001; <code>right</code> &#x3001; <code>top</code> &#x3001; <code>bottom</code> &#x56DB;&#x9879;</td>
</tr>
<tr>
<td>boundingClientRect</td>
<td>Object</td>
<td>&#x76EE;&#x6807;&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x5305;&#x542B; <code>left</code> &#x3001; <code>right</code> &#x3001; <code>top</code> &#x3001; <code>bottom</code> &#x56DB;&#x9879;</td>
</tr>
<tr>
<td>relativeRect</td>
<td>Object</td>
<td>&#x53C2;&#x7167;&#x533A;&#x57DF;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x5305;&#x542B; <code>left</code> &#x3001; <code>right</code> &#x3001; <code>top</code> &#x3001; <code>bottom</code> &#x56DB;&#x9879;</td>
</tr>
<tr>
<td>time</td>
<td>Number</td>
<td>&#x76F8;&#x4EA4;&#x68C0;&#x6D4B;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x6233;</td>
</tr>
</tbody>
</table>
<h3 id="intersectionobserverdisconnect">intersectionObserver.disconnect()</h3>
<p>&#x505C;&#x6B62;&#x76D1;&#x542C;&#x3002;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5C06;&#x4E0D;&#x518D;&#x89E6;&#x53D1;&#x3002;</p>
<p><strong>Tips:</strong></p>
<ul>
<li>&#x4E0E;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x7684;&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5E76;&#x4E0D;&#x51C6;&#x786E;&#x4EE3;&#x8868;&#x7528;&#x6237;&#x53EF;&#x89C1;&#x7684;&#x533A;&#x57DF;&#xFF0C;&#x56E0;&#x4E3A;&#x53C2;&#x4E0E;&#x8BA1;&#x7B97;&#x7684;&#x533A;&#x57DF;&#x662F;&#x201C;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x201D;&#xFF0C;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x7ED8;&#x5236;&#x65F6;&#x88AB;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x88C1;&#x526A;&#x9690;&#x85CF;&#xFF08;&#x5982;&#x7956;&#x5148;&#x8282;&#x70B9;&#x4E2D; overflow &#x6837;&#x5F0F;&#x4E3A; hidden &#x7684;&#x8282;&#x70B9;&#xFF09;&#x6216;&#x906E;&#x76D6;&#xFF08;&#x5982; fixed &#x5B9A;&#x4F4D;&#x7684;&#x8282;&#x70B9;&#xFF09;&#x3002;</li>
</ul>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
