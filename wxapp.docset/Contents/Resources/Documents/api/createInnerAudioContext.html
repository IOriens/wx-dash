<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>wx.createInnerAudioContext</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="wxcreateinneraudiocontext">wx.createInnerAudioContext()</h3>
<blockquote>
<p>基础库 1.6.0 开始支持，低版本需做<a href="../framework/compatibility.html">兼容处理</a></p>
</blockquote>
<p>创建并返回内部 audio 上下文 <code>innerAudioContext</code> 对象。<em>本接口是 <code>wx.createAudioContext</code> 升级版。</em></p>
<h4 id="inneraudiocontext">innerAudioContext</h4>
<p><strong>innerAudioContext 对象的属性列表：</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
<th>只读</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>String</td>
<td>音频的数据链接，用于直接播放。</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>startTime</td>
<td>Number</td>
<td>开始播放的位置（单位：s），默认 0</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>autoplay</td>
<td>Boolean</td>
<td>是否自动开始播放，默认 false</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>loop</td>
<td>Boolean</td>
<td>是否循环播放，默认 false</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>obeyMuteSwitch</td>
<td>Boolean</td>
<td>是否遵循系统静音开关，当此参数为 false 时，即使用户打开了静音开关，也能继续发出声音，默认值 true</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>duration</td>
<td>Number</td>
<td>当前音频的长度（单位：s），只有在当前有合法的 src 时返回</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>currentTime</td>
<td>Number</td>
<td>当前音频的播放位置（单位：s），只有在当前有合法的 src 时返回，时间不取整，保留小数点后 6 位</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>paused</td>
<td>Boolean</td>
<td>当前是是否暂停或停止状态，true 表示暂停或停止，false 表示正在播放</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>buffered</td>
<td>Number</td>
<td>音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲。</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>volume</td>
<td>Number</td>
<td>音量。范围 0~1。</td>
<td>否</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
</tbody>
</table>
<p><strong>innerAudioContext 对象的方法列表：</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>参数</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>play</td>
<td>无</td>
<td>播放</td>
<td></td>
</tr>
<tr>
<td>pause</td>
<td>无</td>
<td>暂停</td>
<td></td>
</tr>
<tr>
<td>stop</td>
<td>无</td>
<td>停止</td>
<td></td>
</tr>
<tr>
<td>seek</td>
<td>position</td>
<td>跳转到指定位置，单位 s</td>
<td></td>
</tr>
<tr>
<td>destroy</td>
<td>无</td>
<td>销毁当前实例</td>
<td></td>
</tr>
<tr>
<td>onCanplay</td>
<td>callback</td>
<td>音频进入可以播放状态，但不保证后面可以流畅播放</td>
<td></td>
</tr>
<tr>
<td>onPlay</td>
<td>callback</td>
<td>音频播放事件</td>
<td></td>
</tr>
<tr>
<td>onPause</td>
<td>callback</td>
<td>音频暂停事件</td>
<td></td>
</tr>
<tr>
<td>onStop</td>
<td>callback</td>
<td>音频停止事件</td>
<td></td>
</tr>
<tr>
<td>onEnded</td>
<td>callback</td>
<td>音频自然播放结束事件</td>
<td></td>
</tr>
<tr>
<td>onTimeUpdate</td>
<td>callback</td>
<td>音频播放进度更新事件</td>
<td></td>
</tr>
<tr>
<td>onError</td>
<td>callback</td>
<td>音频播放错误事件</td>
<td></td>
</tr>
<tr>
<td>onWaiting</td>
<td>callback</td>
<td>音频加载中事件，当音频因为数据不足，需要停下来加载时会触发</td>
<td></td>
</tr>
<tr>
<td>onSeeking</td>
<td>callback</td>
<td>音频进行 seek 操作事件</td>
<td></td>
</tr>
<tr>
<td>onSeeked</td>
<td>callback</td>
<td>音频完成 seek 操作事件</td>
<td></td>
</tr>
<tr>
<td>offCanplay</td>
<td>callback</td>
<td>取消监听 onCanplay 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offPlay</td>
<td>callback</td>
<td>取消监听 onPlay 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offPause</td>
<td>callback</td>
<td>取消监听 onPause 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offStop</td>
<td>callback</td>
<td>取消监听 onStop 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offEnded</td>
<td>callback</td>
<td>取消监听 onEnded 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offTimeUpdate</td>
<td>callback</td>
<td>取消监听 onTimeUpdate 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offError</td>
<td>callback</td>
<td>取消监听 onError 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offWaiting</td>
<td>callback</td>
<td>取消监听 onWaiting 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offSeeking</td>
<td>callback</td>
<td>取消监听 onSeeking 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
<tr>
<td>offSeeked</td>
<td>callback</td>
<td>取消监听 onSeeked 事件</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.0 开始支持，低版本需做兼容处理。">1.9.0</a></td>
</tr>
</tbody>
</table>
<h4 id="errcode-说明">errCode 说明</h4>
<table>
<thead>
<tr>
<th>errCode</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>10001</td>
<td>系统错误</td>
</tr>
<tr>
<td>10002</td>
<td>网络错误</td>
</tr>
<tr>
<td>10003</td>
<td>文件错误</td>
</tr>
<tr>
<td>10004</td>
<td>格式错误</td>
</tr>
<tr>
<td>-1</td>
<td>未知错误</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> innerAudioContext = wx.createInnerAudioContext()
innerAudioContext.autoplay = <span class="hljs-literal">true</span>
innerAudioContext.src = <span class="hljs-string">'http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3?guid=ffffffff82def4af4b12b3cd9337d5e7&uin=346897220&vkey=6292F51E1E384E061FF02C31F716658E5C81F5594D561F2E88B854E81CAAB7806D5E4F103E55D33C16F3FAC506D1AB172DE8600B37E43FAD&fromtag=46'</span>
innerAudioContext.onPlay(() => {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'开始播放'</span>)
})
innerAudioContext.onError((res) => {
    <span class="hljs-built_in">console</span>.log(res.errMsg)
    <span class="hljs-built_in">console</span>.log(res.errCode)
})
</code></pre>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
