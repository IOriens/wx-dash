<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <title>form</title>
  <link rel="stylesheet" href="../../../../../style.css">
  <link rel="stylesheet" href="../../../../../website.css">
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
   <div id="docContent"><div class="content custom"><h1 id="form"><a href="#form" aria-hidden="true" class="header-anchor">#</a> form</h1> <blockquote><p>基础库 1.0.0 开始支持，低版本需做<a href="../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>表单。将组件内的用户输入的<a href="switch.html">switch</a> <a href="input.html">input</a> <a href="checkbox.html">checkbox</a> <a href="slider.html">slider</a> <a href="radio.html">radio</a> <a href="picker.html">picker</a> 提交。</p> <p>当点击 <a href="form.html">form</a> 表单中 form-type 为 submit 的 <a href="button.html">button</a> 组件时，会将表单组件中的 value 值进行提交，需要在表单组件中加上 name 来作为 key。</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>必填</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>report-submit</td> <td>boolean</td> <td>false</td> <td>否</td> <td>是否返回 formId 用于发送<a href="../framework/open-ability/template-message.html">模板消息</a></td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr> <tr><td>report-submit-timeout</td> <td>number</td> <td>0</td> <td>否</td> <td>等待一段时间（毫秒数）以确认 formId 是否生效。如果未指定这个参数，formId 有很小的概率是无效的（如遇到网络失败的情况）。指定这个参数将可以检测 formId 是否有效，以这个参数的时间作为这项检测的超时时间。如果失败，将返回 requestFormId:fail 开头的 formId</td> <td><a href="../framework/compatibility.html">2.6.2</a></td></tr> <tr><td>bindsubmit</td> <td>eventhandle</td> <td></td> <td>否</td> <td>携带 form 中的数据触发 submit 事件，event.detail = {value : {'name': 'value'} , formId: ''}</td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr> <tr><td>bindreset</td> <td>eventhandle</td> <td></td> <td>否</td> <td>表单重置时会触发 reset 事件</td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr></tbody></table></div><h2 id="示例代码"><a href="#示例代码" aria-hidden="true" class="header-anchor">#</a> 示例代码</h2> <p>// <a href="https://developers.weixin.qq.com/s/MUaz7cmy6AYq" title="在开发者工具中预览效果" target="_blank" rel="noopener noreferrer">在开发者工具中预览效果<span></span></a></p> <div class="wrap-mp-code"><iframe src="https://developers.weixin.qq.com/xcode/source/mp_form?tabs=index/index.js,index/index.wxml" type="text/html" height="669" width="100%" frameborder="0" class="wrap-mp-code-iframe"></iframe></div> <h2 id="使用内置-behaviors"><a href="#使用内置-behaviors" aria-hidden="true" class="header-anchor">#</a> 使用内置 behaviors</h2> <p>对于 form 组件，目前可以自动识别下列内置 behaviors:</p> <p>wx://form-field</p> <p>wx://form-field-group</p> <p>wx://form-field-button</p> <h3 id="wx-form-field"><a href="#wx-form-field" aria-hidden="true" class="header-anchor">#</a> wx://form-field</h3> <p>使自定义组件有类似于表单控件的行为。
form 组件可以识别这些自定义组件，并在 submit 事件中返回组件的字段名及其对应字段值。这将为它添加以下两个属性。</p> <div class="table-wrp"><table><thead><tr><th>属性名</th> <th>类型</th> <th>描述</th> <th>最低版本</th></tr></thead> <tbody><tr><td id="form-name">name</td> <td>String</td> <td>在表单中的字段名</td> <td><a href="../framework/compatibility.html">1.6.7</a></td></tr> <tr><td id="form-value">value</td> <td>任意</td> <td>在表单中的字段值</td> <td><a href="../framework/compatibility.html">1.6.7</a></td></tr></tbody></table></div><p>代码示例：
<a href="https://developers.weixin.qq.com/s/3FjTHCmY7ghg" title="在开发者工具中预览效果" target="_blank" rel="noopener noreferrer">在开发者工具中预览效果<span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// custom-form-field.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 behaviors<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'wx://form-field'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   value<span class="token punctuation">:</span> <span class="token string">''</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">onChange</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="wx-form-field-group"><a href="#wx-form-field-group" aria-hidden="true" class="header-anchor">#</a> wx://form-field-group</h3> <p>从基础库版本 <a href="../framework/compatibility.html">2.10.2</a> 开始提供支持。</p> <p>代码示例：
<a href="https://developers.weixin.qq.com/s/G4mBEDms7chC" title="在开发者工具中预览效果" target="_blank" rel="noopener noreferrer">在开发者工具中预览效果<span></span></a></p> <p>使 form 组件可以识别到这个自定义组件内部的所有表单控件。
例如，页面的结构如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">bindsubmit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-comp</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-comp</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件 <code>custom-comp</code> 自身结构如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>switch</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>student<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>如果组件 <code>custom-comp</code> 配置有：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 behaviors<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'wx://form-field-group'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>此时，表单的 <code>submit</code> 事件的 <code>value</code> 中将包含 <code>name</code> 和 <code>student</code> 两个字段。</p> <h3 id="wx-form-field-button"><a href="#wx-form-field-button" aria-hidden="true" class="header-anchor">#</a> wx://form-field-button</h3> <p>从基础库版本 <a href="../framework/compatibility.html">2.10.3</a> 开始提供支持。</p> <p>代码示例：
<a href="https://developers.weixin.qq.com/s/HSmT1Dmz7Phx" title="在开发者工具中预览效果" target="_blank" rel="noopener noreferrer">在开发者工具中预览效果<span></span></a></p> <p>使 form 组件可以识别到这个自定义组件内部的 button ，
如果自定义组件内部有设置了 form-type 的 button ，它将被组件外的 form 接受。
例如，页面的结构如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">bindsubmit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>请输入名字<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-comp</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-comp</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件 <code>custom-comp</code> 自身结构如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果组件 <code>custom-comp</code> 配置有：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 behaviors<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'wx://form-field-button'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>此时点击组件内的 button ，将触发 form 的 submit 事件。</p></div></div> <!---->    


</body></html>