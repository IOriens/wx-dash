<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>音频组件控制</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="wxcreateaudiocontextaudioid-this">wx.createAudioContext(audioId, this)</h3>
<p><strong>注意：1.6.0 版本开始，本接口不再维护。建议使用能力更强的 <a href="createInnerAudioContext.html">wx.createInnerAudioContext</a> 接口</strong></p>
<p>创建并返回 audio 上下文 <code>audioContext</code> 对象。在自定义组件下，第二个参数传入组件实例this，以操作组件内 <code><audio/></code> 组件</p>
<h4 id="audiocontext">audioContext</h4>
<p><code>audioContext</code> 通过 audioId 跟一个 <code><audio/></code> 组件绑定，通过它可以操作对应的 <code><audio/></code> 组件。</p>
<p><strong>audioContext 对象的方法列表：</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>setSrc</td>
<td>src</td>
<td>音频的地址</td>
</tr>
<tr>
<td>play</td>
<td>无</td>
<td>播放</td>
</tr>
<tr>
<td>pause</td>
<td>无</td>
<td>暂停</td>
</tr>
<tr>
<td>seek</td>
<td>position</td>
<td>跳转到指定位置，单位 s</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- audio.wxml --></span>
<span class="hljs-tag"><<span class="hljs-name">audio</span>  <span class="hljs-attr">src</span>=<span class="hljs-string">"{{src}}"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myAudio"</span> ></span><span class="hljs-tag"></<span class="hljs-name">audio</span>></span>

<span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"audioPlay"</span>></span>播放<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
<span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"audioPause"</span>></span>暂停<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
<span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"audio14"</span>></span>设置当前播放时间为14秒<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
<span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"audioStart"</span>></span>回到开头<span class="hljs-tag"></<span class="hljs-name">button</span>></span>
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-comment">// audio.js</span>
Page({
  onReady: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
    <span class="hljs-comment">// 使用 wx.createAudioContext 获取 audio 上下文 context</span>
    <span class="hljs-keyword">this</span>.audioCtx = wx.createAudioContext(<span class="hljs-string">'myAudio'</span>)
    <span class="hljs-keyword">this</span>.audioCtx.setSrc(<span class="hljs-string">'http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3?guid=ffffffff82def4af4b12b3cd9337d5e7&uin=346897220&vkey=6292F51E1E384E06DCBDC9AB7C49FD713D632D313AC4858BACB8DDD29067D3C601481D36E62053BF8DFEAF74C0A5CCFADD6471160CAF3E6A&fromtag=46'</span>)
    <span class="hljs-keyword">this</span>.audioCtx.play()
  },
  data: {
    src: <span class="hljs-string">''</span>
  },
  audioPlay: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.audioCtx.play()
  },
  audioPause: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.audioCtx.pause()
  },
  audio14: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.audioCtx.seek(<span class="hljs-number">14</span>)
  },
  audioStart: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.audioCtx.seek(<span class="hljs-number">0</span>)
  }
})
</code></pre>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
