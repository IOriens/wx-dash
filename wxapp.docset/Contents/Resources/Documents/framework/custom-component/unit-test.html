<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>单元测试</title>
  <link rel="stylesheet" href="../../../style.css" />
  <link rel="stylesheet" href="../../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                    <div id="book-search-results">
                        <div class="search-noresults">
                            <section class="normal markdown-section">
                              <h1 id="&#x5355;&#x5143;&#x6D4B;&#x8BD5;">&#x5355;&#x5143;&#x6D4B;&#x8BD5;</h1>
<p>&#x5728;&#x7F16;&#x5199;&#x9AD8;&#x8D28;&#x91CF;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x662F;&#x6C38;&#x8FDC;&#x907F;&#x4E0D;&#x5F00;&#x7684;&#x4E00;&#x4E2A;&#x8BDD;&#x9898;&#x3002;&#x5B8C;&#x5584;&#x7684;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x662F;&#x63D0;&#x9AD8;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x53EF;&#x7528;&#x6027;&#x7684;&#x4FDD;&#x8BC1;&#xFF0C;&#x540C;&#x65F6;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x8986;&#x76D6;&#x7387;&#x4E5F;&#x662F;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x7684;&#x4E00;&#x4E2A;&#x73AF;&#x8282;&#x3002;&#x5C0F;&#x7A0B;&#x5E8F;&#x4ECE;&#x57FA;&#x7840;&#x5E93;&#x7248;&#x672C; <a href="../compatibility.html" title="&#x57FA;&#x7840;&#x5E93; 2.2.1 &#x5F00;&#x59CB;&#x652F;&#x6301;&#xFF0C;&#x4F4E;&#x7248;&#x672C;&#x9700;&#x505A;&#x517C;&#x5BB9;&#x5904;&#x7406;&#x3002;">2.2.1</a> &#x5F00;&#x59CB;&#x62E5;&#x62B1;&#x5F00;&#x6E90;&#xFF0C;&#x652F;&#x6301;&#x4F7F;&#x7528; npm &#x5B89;&#x88C5;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#xFF0C;&#x90A3;&#x9488;&#x5BF9;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E5F;&#x662F;&#x5FC5;&#x987B;&#x652F;&#x6301;&#x7684;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x5C31;&#x6765;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5BF9;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;</p>
<h2 id="&#x6D4B;&#x8BD5;&#x6846;&#x67B6;">&#x6D4B;&#x8BD5;&#x6846;&#x67B6;</h2>
<p>&#x73B0;&#x5728;&#x5E02;&#x9762;&#x4E0A;&#x6D41;&#x884C;&#x7684;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;&#x5747;&#x53EF;&#x4F7F;&#x7528;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x80FD;&#x517C;&#x987E; nodejs &#x7AEF;&#x548C; dom &#x73AF;&#x5883;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x5230; nodejs &#x7684;&#x4E00;&#x4E9B;&#x5E93;&#x6765;&#x5B8C;&#x5584;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#xFF0C;&#x540C;&#x65F6; dom &#x73AF;&#x5883;&#x4E5F;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5EFA;&#x6210;&#x5B8C;&#x6574;&#x7684; dom &#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x624D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x6A21;&#x62DF;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x7684;&#x8FD0;&#x884C;&#x3002;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x9009;&#x7528; mocha + jsdom &#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x4EA6;&#x53EF;&#x9009;&#x7528; jest&#xFF0C;&#x4E0B;&#x8FF0;&#x4F8B;&#x5B50;&#x9009;&#x7528; jest &#x4F5C;&#x4E3A;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;&#x6765;&#x8BF4;&#x660E;&#x3002;</p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;">&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;</h2>
<p>&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#xFF0C;&#x4E0D;&#x540C;&#x4E8E;&#x5E38;&#x89C1;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x73AF;&#x5883;&#xFF0C;&#x5B83;&#x91C7;&#x7528;&#x7684;&#x662F;&#x53CC;&#x7EBF;&#x7A0B;&#x7684;&#x67B6;&#x6784;&#x3002;&#x800C;&#x5728;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x7528;&#x5230;&#x8FD9;&#x6837;&#x590D;&#x6742;&#x7684;&#x67B6;&#x6784;&#x5E26;&#x6765;&#x7684;&#x5229;&#x597D;&#xFF0C;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x7684;&#x662F;&#x529F;&#x80FD;&#x6D4B;&#x8BD5;&#x800C;&#x65E0;&#x9700;&#x82DB;&#x6C42;&#x6027;&#x80FD;&#x3001;&#x5B89;&#x5168;&#x7B49;&#x56E0;&#x7D20;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;&#x4EE5;&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x5728; nodejs &#x5355;&#x7EBF;&#x7A0B;&#x4E2D;&#x4E5F;&#x80FD;&#x8FD0;&#x884C;&#x8D77;&#x6765;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5148;&#x5B89;&#x88C5;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;&#x2014;&#x2014;<a href="https://github.com/wechat-miniprogram/miniprogram-simulate" target="_blank">miniprogram-simulate</a>&#xFF1A;</p>
<pre><code>npm i --save-dev miniprogram-simulate
</code></pre>
<h2 id="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;">&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</h2>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709;&#x5982;&#x4E0B;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<pre><code class="language-html"><span class="hljs-comment">&lt;!-- /components/index.wmxl --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>{{prop}}<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
</code></pre>
<pre><code class="language-js"><span class="hljs-comment">// /components/index.js</span>
Component({
  <span class="hljs-attr">properties</span>: {
    <span class="hljs-attr">prop</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-string">&apos;index.properties&apos;</span>
    },
  },
})
</code></pre>
<pre><code class="language-css"><span class="hljs-comment">/* /components/index.wxss */</span>
<span class="hljs-selector-class">.index</span> {
  <span class="hljs-attribute">color</span>: green;
}
</code></pre>
<p>&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x6D4B;&#x8BD5;&#x6E32;&#x67D3;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF1A;</p>
<pre><code class="language-js"><span class="hljs-comment">// /test/components/index.test.js</span>
<span class="hljs-keyword">const</span> simulate = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;miniprogram-simulate&apos;</span>)

test(<span class="hljs-string">&apos;components/index&apos;</span>, () =&gt; {
  <span class="hljs-keyword">const</span> id = simulate.load(<span class="hljs-string">&apos;/components/index&apos;</span>) <span class="hljs-comment">// &#x6B64;&#x5904;&#x5FC5;&#x987B;&#x4F20;&#x5165;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span>
  <span class="hljs-keyword">const</span> comp = simulate.render(id) <span class="hljs-comment">// &#x6E32;&#x67D3;&#x6210;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x6811;&#x5B9E;&#x4F8B;</span>

  <span class="hljs-keyword">const</span> parent = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;parent-wrapper&apos;</span>) <span class="hljs-comment">// &#x521B;&#x5EFA;&#x7236;&#x4EB2;&#x8282;&#x70B9;</span>
  comp.attach(parent) <span class="hljs-comment">// attach &#x5230;&#x7236;&#x4EB2;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x6B64;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x7684; attached &#x94A9;&#x5B50;</span>

  <span class="hljs-keyword">const</span> view = comp.querySelector(<span class="hljs-string">&apos;.index&apos;</span>) <span class="hljs-comment">// &#x83B7;&#x53D6;&#x5B50;&#x7EC4;&#x4EF6; view</span>
  expect(view.dom.innerHTML).toBe(<span class="hljs-string">&apos;index.properties&apos;</span>) <span class="hljs-comment">// &#x6D4B;&#x8BD5;&#x6E32;&#x67D3;&#x7ED3;&#x679C;</span>
  expect(<span class="hljs-built_in">window</span>.getComputedStyle(view.dom).color).toBe(<span class="hljs-string">&apos;green&apos;</span>) <span class="hljs-comment">// &#x6D4B;&#x8BD5;&#x6E32;&#x67D3;&#x7ED3;&#x679C;</span>
})
</code></pre>
<blockquote>
<p>PS&#xFF1A;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;&#x4E2D;&#x7684; wx &#x5BF9;&#x8C61;&#x548C;&#x5185;&#x7F6E;&#x7EC4;&#x4EF6;&#x90FD;&#x4E0D;&#x4F1A;&#x5B9E;&#x73B0;&#x771F;&#x6B63;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x6D4B;&#x8BD5;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x573A;&#x666F;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x8986;&#x76D6;&#x6389;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;&#x4E2D;&#x7684; api &#x63A5;&#x53E3;&#x548C;&#x5185;&#x7F6E;&#x7EC4;&#x4EF6;&#x3002;</p>
<p>PS&#xFF1A;&#x76EE;&#x524D;&#x56E0;&#x4E3A;&#x6709;&#x90E8;&#x5206;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x529F;&#x80FD;&#x4ECD;&#x672A;&#x652F;&#x6301;&#xFF08;&#x5982;&#x62BD;&#x8C61;&#x8282;&#x70B9;&#x7B49;&#xFF09;&#xFF0C;&#x6545;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x6682;&#x65E0;&#x6CD5;&#x5168;&#x90E8;&#x8986;&#x76D6;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x540E;&#x7EED;&#x4F1A;&#x7EE7;&#x7EED;&#x5B8C;&#x5584;&#x3002;</p>
</blockquote>
<p>&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x96C6;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x65B9;&#x4FBF;&#x6D4B;&#x8BD5;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x6A21;&#x62DF; touch &#x4E8B;&#x4EF6;&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;</li>
<li>&#x9009;&#x53D6;&#x5B50;&#x8282;&#x70B9;</li>
<li>&#x66F4;&#x65B0;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x6570;&#x636E;</li>
<li>&#x89E6;&#x53D1;&#x751F;&#x547D;&#x5468;&#x671F;</li>
<li>...</li>
</ul>
<p>&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#x7684;&#x7528;&#x6CD5;&#x53EF;&#x4EE5;&#x53C2;&#x9605; <a href="https://github.com/wechat-miniprogram/miniprogram-simulate" target="_blank">github &#x4ED3;&#x5E93;</a>&#x4E0A;&#x7684;&#x6587;&#x6863;&#x3002;</p>

                            </section>
                        </div>
                        
                    </div>
                
</body>
</html>
