<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>抽象节点</title>
  <link rel="stylesheet" href="../../style.css" />
  <link rel="stylesheet" href="../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="抽象节点">抽象节点</h1>
<p>这个特性自小程序基础库版本 <a href="../compatibility.html" title="基础库 1.9.6 开始支持，低版本需做兼容处理。">1.9.6</a> 开始支持。</p>
<h2 id="在组件中使用抽象节点">在组件中使用抽象节点</h2>
<p>有时，自定义组件模版中的一些节点，其对应的自定义组件不是由自定义组件本身确定的，而是自定义组件的调用者确定的。这时可以把这个节点声明为“抽象节点”。</p>
<p>例如，我们现在来实现一个“选框组”（selectable-group）组件，它其中可以放置单选框（custom-radio）或者复选框（custom-checkbox）。这个组件的 wxml 可以这样编写：</p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- selectable-group.wxml --></span>
<span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">wx:for</span>=<span class="hljs-string">"{{labels}}"</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">label</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">selectable</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">"{{false}}"</span>></span><span class="hljs-tag"></<span class="hljs-name">selectable</span>></span>
    {{item}}
  <span class="hljs-tag"></<span class="hljs-name">label</span>></span>
<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
</code></pre>
<p>其中，“selectable”不是任何在 json 文件的 <code>usingComponents</code> 字段中声明的组件，而是一个抽象节点。它需要在 <code>componentGenerics</code> 字段中声明：</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"componentGenerics"</span>: {
    <span class="hljs-string">"selectable"</span>: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h2 id="使用包含抽象节点的组件">使用包含抽象节点的组件</h2>
<p>在使用 selectable-group 组件时，必须指定“selectable”具体是哪个组件：</p>
<pre><code class="lang-html"><span class="hljs-tag"><<span class="hljs-name">selectable-group</span> <span class="hljs-attr">generic:selectable</span>=<span class="hljs-string">"custom-radio"</span> /></span>
</code></pre>
<p>这样，在生成这个 selectable-group 组件的实例时，“selectable”节点会生成“custom-radio”组件实例。类似地，如果这样使用：</p>
<pre><code class="lang-html"><span class="hljs-tag"><<span class="hljs-name">selectable-group</span> <span class="hljs-attr">generic:selectable</span>=<span class="hljs-string">"custom-checkbox"</span> /></span>
</code></pre>
<p>“selectable”节点则会生成“custom-checkbox”组件实例。</p>
<p>注意：上述的 <code>custom-radio</code> 和 <code>custom-checkbox</code> 需要包含在这个 wxml 对应 json 文件的 <code>usingComponents</code> 定义段中。</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"usingComponents"</span>: {
    <span class="hljs-string">"custom-radio"</span>: <span class="hljs-string">"path/to/custom/radio"</span>,
    <span class="hljs-string">"custom-checkbox"</span>: <span class="hljs-string">"path/to/custom/checkbox"</span>
  }
}
</code></pre>
<h2 id="抽象节点的默认组件">抽象节点的默认组件</h2>
<p>抽象节点可以指定一个默认组件，当具体组件未被指定时，将创建默认组件的实例。默认组件可以在 <code>componentGenerics</code> 字段中指定：</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"componentGenerics"</span>: {
    <span class="hljs-string">"selectable"</span>: {
      <span class="hljs-string">"default"</span>: <span class="hljs-string">"path/to/default/component"</span>
    }
  }
}
</code></pre>
<p><strong>Tips:</strong></p>
<ul>
<li>节点的 generic 引用 <code>generic:xxx="yyy"</code> 中，值 <code>yyy</code> 只能是静态值，不能包含数据绑定。因而抽象节点特性并不适用于动态决定节点名的场景。</li>
</ul>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
