<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>InnerAudioContext</title>
  <link rel="stylesheet" href="../../../../../../../style.css" />
  <link rel="stylesheet" href="../../../../../../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
   <div id="docContent"><div class="content custom"><h1 id="InnerAudioContext"><a href="#InnerAudioContext" aria-hidden="true" class="header-anchor">#</a> InnerAudioContext</h1> <p>InnerAudioContext 实例，可通过 <a href="wx.createInnerAudioContext.html">wx.createInnerAudioContext</a> 接口获取实例。注意，音频播放过程中，可能被系统中断，可通过 <a href="../../base/app/app-event/wx.onAudioInterruptionBegin.html">wx.onAudioInterruptionBegin</a>、<a href="../../base/app/app-event/wx.onAudioInterruptionEnd.html">wx.onAudioInterruptionEnd</a>事件来处理这种情况。</p> <h2 id="属性"><a href="#属性" aria-hidden="true" class="header-anchor">#</a> 属性</h2> <h3 id="string-src"><a href="#string-src" aria-hidden="true" class="header-anchor">#</a> string src</h3> <p>音频资源的地址，用于直接播放。<a href="../../../framework/compatibility.html">2.2.3</a> 开始支持云文件ID</p> <h3 id="number-startTime"><a href="#number-startTime" aria-hidden="true" class="header-anchor">#</a> number startTime</h3> <p>开始播放的位置（单位：s），默认为 0</p> <h3 id="boolean-autoplay"><a href="#boolean-autoplay" aria-hidden="true" class="header-anchor">#</a> boolean autoplay</h3> <p>是否自动开始播放，默认为 <code>false</code></p> <h3 id="boolean-loop"><a href="#boolean-loop" aria-hidden="true" class="header-anchor">#</a> boolean loop</h3> <p>是否循环播放，默认为 <code>false</code></p> <h3 id="boolean-obeyMuteSwitch"><a href="#boolean-obeyMuteSwitch" aria-hidden="true" class="header-anchor">#</a> boolean obeyMuteSwitch</h3> <p>是否遵循系统静音开关，默认为 <code>true</code>。当此参数为 <code>false</code> 时，即使用户打开了静音开关，也能继续发出声音。从 2.3.0 版本开始此参数不生效，使用 <a href="wx.setInnerAudioOption.html">wx.setInnerAudioOption</a> 接口统一设置。</p> <h3 id="number-volume"><a href="#number-volume" aria-hidden="true" class="header-anchor">#</a> number volume</h3> <blockquote><p>基础库 1.9.90 开始支持，低版本需做<a href="../../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>音量。范围 0~1。默认为 1</p> <h3 id="number-playbackRate"><a href="#number-playbackRate" aria-hidden="true" class="header-anchor">#</a> number playbackRate</h3> <blockquote><p>基础库 2.11.0 开始支持，低版本需做<a href="../../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>播放速度。范围 0.5-2.0，默认为 1。（Android 需要 6 及以上版本）</p> <h3 id="number-duration"><a href="#number-duration" aria-hidden="true" class="header-anchor">#</a> number duration</h3> <p>当前音频的长度（单位 s）。只有在当前有合法的 src 时返回（只读）</p> <h3 id="number-currentTime"><a href="#number-currentTime" aria-hidden="true" class="header-anchor">#</a> number currentTime</h3> <p>当前音频的播放位置（单位 s）。只有在当前有合法的 src 时返回，时间保留小数点后 6 位（只读）</p> <h3 id="boolean-paused"><a href="#boolean-paused" aria-hidden="true" class="header-anchor">#</a> boolean paused</h3> <p>当前是是否暂停或停止状态（只读）</p> <h3 id="number-buffered"><a href="#number-buffered" aria-hidden="true" class="header-anchor">#</a> number buffered</h3> <p>音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲（只读）</p> <h2 id="方法"><a href="#方法" aria-hidden="true" class="header-anchor">#</a> 方法</h2> <h3 id="InnerAudioContext-play"><a href="#InnerAudioContext-play" aria-hidden="true" class="header-anchor">#</a> <a href="InnerAudioContext.play.html">InnerAudioContext.play()</a></h3> <p>播放</p> <h3 id="InnerAudioContext-pause"><a href="#InnerAudioContext-pause" aria-hidden="true" class="header-anchor">#</a> <a href="InnerAudioContext.pause.html">InnerAudioContext.pause()</a></h3> <p>暂停。暂停后的音频再播放会从暂停处开始播放</p> <h3 id="InnerAudioContext-stop"><a href="#InnerAudioContext-stop" aria-hidden="true" class="header-anchor">#</a> <a href="InnerAudioContext.stop.html">InnerAudioContext.stop()</a></h3> <p>停止。停止后的音频再播放会从头开始播放。</p> <h3 id="InnerAudioContext-seek-number-position"><a href="#InnerAudioContext-seek-number-position" aria-hidden="true" class="header-anchor">#</a> <a href="InnerAudioContext.seek.html">InnerAudioContext.seek(number position)</a></h3> <p>跳转到指定位置</p> <h3 id="InnerAudioContext-destroy"><a href="#InnerAudioContext-destroy" aria-hidden="true" class="header-anchor">#</a> <a href="InnerAudioContext.destroy.html">InnerAudioContext.destroy()</a></h3> <p>销毁当前实例</p> <h3 id="InnerAudioContext-onCanplay-function-callback"><a href="#InnerAudioContext-onCanplay-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onCanplay.html">InnerAudioContext.onCanplay(function callback)</a></h3> <p>监听音频进入可以播放状态的事件。但不保证后面可以流畅播放</p> <h3 id="InnerAudioContext-offCanplay-function-callback"><a href="#InnerAudioContext-offCanplay-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offCanplay.html">InnerAudioContext.offCanplay(function callback)</a></h3> <p>取消监听音频进入可以播放状态的事件</p> <h3 id="InnerAudioContext-onPlay-function-callback"><a href="#InnerAudioContext-onPlay-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onPlay.html">InnerAudioContext.onPlay(function callback)</a></h3> <p>监听音频播放事件</p> <h3 id="InnerAudioContext-offPlay-function-callback"><a href="#InnerAudioContext-offPlay-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offPlay.html">InnerAudioContext.offPlay(function callback)</a></h3> <p>取消监听音频播放事件</p> <h3 id="InnerAudioContext-onPause-function-callback"><a href="#InnerAudioContext-onPause-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onPause.html">InnerAudioContext.onPause(function callback)</a></h3> <p>监听音频暂停事件</p> <h3 id="InnerAudioContext-offPause-function-callback"><a href="#InnerAudioContext-offPause-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offPause.html">InnerAudioContext.offPause(function callback)</a></h3> <p>取消监听音频暂停事件</p> <h3 id="InnerAudioContext-onStop-function-callback"><a href="#InnerAudioContext-onStop-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onStop.html">InnerAudioContext.onStop(function callback)</a></h3> <p>监听音频停止事件</p> <h3 id="InnerAudioContext-offStop-function-callback"><a href="#InnerAudioContext-offStop-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offStop.html">InnerAudioContext.offStop(function callback)</a></h3> <p>取消监听音频停止事件</p> <h3 id="InnerAudioContext-onEnded-function-callback"><a href="#InnerAudioContext-onEnded-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onEnded.html">InnerAudioContext.onEnded(function callback)</a></h3> <p>监听音频自然播放至结束的事件</p> <h3 id="InnerAudioContext-offEnded-function-callback"><a href="#InnerAudioContext-offEnded-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offEnded.html">InnerAudioContext.offEnded(function callback)</a></h3> <p>取消监听音频自然播放至结束的事件</p> <h3 id="InnerAudioContext-onTimeUpdate-function-callback"><a href="#InnerAudioContext-onTimeUpdate-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onTimeUpdate.html">InnerAudioContext.onTimeUpdate(function callback)</a></h3> <p>监听音频播放进度更新事件</p> <h3 id="InnerAudioContext-offTimeUpdate-function-callback"><a href="#InnerAudioContext-offTimeUpdate-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offTimeUpdate.html">InnerAudioContext.offTimeUpdate(function callback)</a></h3> <p>取消监听音频播放进度更新事件</p> <h3 id="InnerAudioContext-onError-function-callback"><a href="#InnerAudioContext-onError-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onError.html">InnerAudioContext.onError(function callback)</a></h3> <p>监听音频播放错误事件</p> <h3 id="InnerAudioContext-offError-function-callback"><a href="#InnerAudioContext-offError-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offError.html">InnerAudioContext.offError(function callback)</a></h3> <p>取消监听音频播放错误事件</p> <h3 id="InnerAudioContext-onWaiting-function-callback"><a href="#InnerAudioContext-onWaiting-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onWaiting.html">InnerAudioContext.onWaiting(function callback)</a></h3> <p>监听音频加载中事件。当音频因为数据不足，需要停下来加载时会触发</p> <h3 id="InnerAudioContext-offWaiting-function-callback"><a href="#InnerAudioContext-offWaiting-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offWaiting.html">InnerAudioContext.offWaiting(function callback)</a></h3> <p>取消监听音频加载中事件</p> <h3 id="InnerAudioContext-onSeeking-function-callback"><a href="#InnerAudioContext-onSeeking-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onSeeking.html">InnerAudioContext.onSeeking(function callback)</a></h3> <p>监听音频进行跳转操作的事件</p> <h3 id="InnerAudioContext-offSeeking-function-callback"><a href="#InnerAudioContext-offSeeking-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offSeeking.html">InnerAudioContext.offSeeking(function callback)</a></h3> <p>取消监听音频进行跳转操作的事件</p> <h3 id="InnerAudioContext-onSeeked-function-callback"><a href="#InnerAudioContext-onSeeked-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.onSeeked.html">InnerAudioContext.onSeeked(function callback)</a></h3> <p>监听音频完成跳转操作的事件</p> <h3 id="InnerAudioContext-offSeeked-function-callback"><a href="#InnerAudioContext-offSeeked-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./InnerAudioContext.offSeeked.html">InnerAudioContext.offSeeked(function callback)</a></h3> <p>取消监听音频完成跳转操作的事件</p> <h2 id="支持格式"><a href="#支持格式" aria-hidden="true" class="header-anchor">#</a> 支持格式</h2> <div class="table-wrp"><table><thead><tr><th>格式</th> <th>iOS</th> <th>Android</th></tr></thead> <tbody><tr><td>flac</td> <td>x</td> <td>√</td></tr> <tr><td>m4a</td> <td>√</td> <td>√</td></tr> <tr><td>ogg</td> <td>x</td> <td>√</td></tr> <tr><td>ape</td> <td>x</td> <td>√</td></tr> <tr><td>amr</td> <td>x</td> <td>√</td></tr> <tr><td>wma</td> <td>x</td> <td>√</td></tr> <tr><td>wav</td> <td>√</td> <td>√</td></tr> <tr><td>mp3</td> <td>√</td> <td>√</td></tr> <tr><td>mp4</td> <td>x</td> <td>√</td></tr> <tr><td>aac</td> <td>√</td> <td>√</td></tr> <tr><td>aiff</td> <td>√</td> <td>x</td></tr> <tr><td>caf</td> <td>√</td> <td>x</td></tr></tbody></table></div><h2 id="示例代码"><a href="#示例代码" aria-hidden="true" class="header-anchor">#</a> 示例代码</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> innerAudioContext <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createInnerAudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
innerAudioContext<span class="token punctuation">.</span>autoplay <span class="token operator">=</span> <span class="token boolean">true</span>
innerAudioContext<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3?guid=ffffffff82def4af4b12b3cd9337d5e7&amp;uin=346897220&amp;vkey=6292F51E1E384E061FF02C31F716658E5C81F5594D561F2E88B854E81CAAB7806D5E4F103E55D33C16F3FAC506D1AB172DE8600B37E43FAD&amp;fromtag=46'</span>
innerAudioContext<span class="token punctuation">.</span><span class="token function">onPlay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始播放'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
innerAudioContext<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errCode<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div></div> <!---->    
</body>
</html>
