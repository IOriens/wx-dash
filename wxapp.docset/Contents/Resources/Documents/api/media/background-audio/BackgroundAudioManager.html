<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>BackgroundAudioManager</title>
  <link rel="stylesheet" href="../../../../../../../style.css" />
  <link rel="stylesheet" href="../../../../../../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
   <div id="docContent"><div class="content custom"><h1 id="BackgroundAudioManager"><a href="#BackgroundAudioManager" aria-hidden="true" class="header-anchor">#</a> BackgroundAudioManager</h1> <p>BackgroundAudioManager 实例，可通过 <a href="wx.getBackgroundAudioManager.html">wx.getBackgroundAudioManager</a> 获取。</p> <h2 id="属性"><a href="#属性" aria-hidden="true" class="header-anchor">#</a> 属性</h2> <h3 id="string-src"><a href="#string-src" aria-hidden="true" class="header-anchor">#</a> string src</h3> <p>音频的数据源（<a href="../../../framework/compatibility.html">2.2.3</a> 开始支持云文件ID）。默认为空字符串，<strong>当设置了新的 src 时，会自动开始播放</strong>，目前支持的格式有 m4a, aac, mp3, wav。</p> <h3 id="number-startTime"><a href="#number-startTime" aria-hidden="true" class="header-anchor">#</a> number startTime</h3> <p>音频开始播放的位置（单位：s）。</p> <h3 id="string-title"><a href="#string-title" aria-hidden="true" class="header-anchor">#</a> string title</h3> <p>音频标题，用于原生音频播放器音频标题（必填）。原生音频播放器中的分享功能，分享出去的卡片标题，也将使用该值。</p> <h3 id="string-epname"><a href="#string-epname" aria-hidden="true" class="header-anchor">#</a> string epname</h3> <p>专辑名，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。</p> <h3 id="string-singer"><a href="#string-singer" aria-hidden="true" class="header-anchor">#</a> string singer</h3> <p>歌手名，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。</p> <h3 id="string-coverImgUrl"><a href="#string-coverImgUrl" aria-hidden="true" class="header-anchor">#</a> string coverImgUrl</h3> <p>封面图 URL，用于做原生音频播放器背景图。原生音频播放器中的分享功能，分享出去的卡片配图及背景也将使用该图。</p> <h3 id="string-webUrl"><a href="#string-webUrl" aria-hidden="true" class="header-anchor">#</a> string webUrl</h3> <p>页面链接，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。</p> <h3 id="string-protocol"><a href="#string-protocol" aria-hidden="true" class="header-anchor">#</a> string protocol</h3> <blockquote><p>基础库 1.9.94 开始支持，低版本需做<a href="../../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>音频协议。默认值为 'http'，设置 'hls' 可以支持播放 HLS 协议的直播音频。</p> <h3 id="number-playbackRate"><a href="#number-playbackRate" aria-hidden="true" class="header-anchor">#</a> number playbackRate</h3> <blockquote><p>基础库 2.11.0 开始支持，低版本需做<a href="../../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>播放速度。范围 0.5-2.0，默认为 1。（Android 需要 6 及以上版本）</p> <h3 id="number-duration"><a href="#number-duration" aria-hidden="true" class="header-anchor">#</a> number duration</h3> <p>当前音频的长度（单位：s），只有在有合法 src 时返回。（只读）</p> <h3 id="number-currentTime"><a href="#number-currentTime" aria-hidden="true" class="header-anchor">#</a> number currentTime</h3> <p>当前音频的播放位置（单位：s），只有在有合法 src 时返回。（只读）</p> <h3 id="boolean-paused"><a href="#boolean-paused" aria-hidden="true" class="header-anchor">#</a> boolean paused</h3> <p>当前是否暂停或停止。（只读）</p> <h3 id="number-buffered"><a href="#number-buffered" aria-hidden="true" class="header-anchor">#</a> number buffered</h3> <p>音频已缓冲的时间，仅保证当前播放时间点到此时间点内容已缓冲。（只读）</p> <h2 id="方法"><a href="#方法" aria-hidden="true" class="header-anchor">#</a> 方法</h2> <h3 id="BackgroundAudioManager-play"><a href="#BackgroundAudioManager-play" aria-hidden="true" class="header-anchor">#</a> <a href="BackgroundAudioManager.play.html">BackgroundAudioManager.play()</a></h3> <p>播放音乐</p> <h3 id="BackgroundAudioManager-pause"><a href="#BackgroundAudioManager-pause" aria-hidden="true" class="header-anchor">#</a> <a href="BackgroundAudioManager.pause.html">BackgroundAudioManager.pause()</a></h3> <p>暂停音乐</p> <h3 id="BackgroundAudioManager-seek-number-currentTime"><a href="#BackgroundAudioManager-seek-number-currentTime" aria-hidden="true" class="header-anchor">#</a> <a href="BackgroundAudioManager.seek.html">BackgroundAudioManager.seek(number currentTime)</a></h3> <p>跳转到指定位置</p> <h3 id="BackgroundAudioManager-stop"><a href="#BackgroundAudioManager-stop" aria-hidden="true" class="header-anchor">#</a> <a href="BackgroundAudioManager.stop.html">BackgroundAudioManager.stop()</a></h3> <p>停止音乐</p> <h3 id="BackgroundAudioManager-onCanplay-function-callback"><a href="#BackgroundAudioManager-onCanplay-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onCanplay.html">BackgroundAudioManager.onCanplay(function callback)</a></h3> <p>监听背景音频进入可播放状态事件。 但不保证后面可以流畅播放</p> <h3 id="BackgroundAudioManager-onWaiting-function-callback"><a href="#BackgroundAudioManager-onWaiting-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onWaiting.html">BackgroundAudioManager.onWaiting(function callback)</a></h3> <p>监听音频加载中事件。当音频因为数据不足，需要停下来加载时会触发</p> <h3 id="BackgroundAudioManager-onError-function-callback"><a href="#BackgroundAudioManager-onError-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onError.html">BackgroundAudioManager.onError(function callback)</a></h3> <p>监听背景音频播放错误事件</p> <h3 id="BackgroundAudioManager-onPlay-function-callback"><a href="#BackgroundAudioManager-onPlay-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onPlay.html">BackgroundAudioManager.onPlay(function callback)</a></h3> <p>监听背景音频播放事件</p> <h3 id="BackgroundAudioManager-onPause-function-callback"><a href="#BackgroundAudioManager-onPause-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onPause.html">BackgroundAudioManager.onPause(function callback)</a></h3> <p>监听背景音频暂停事件</p> <h3 id="BackgroundAudioManager-onSeeking-function-callback"><a href="#BackgroundAudioManager-onSeeking-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onSeeking.html">BackgroundAudioManager.onSeeking(function callback)</a></h3> <p>监听背景音频开始跳转操作事件</p> <h3 id="BackgroundAudioManager-onSeeked-function-callback"><a href="#BackgroundAudioManager-onSeeked-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onSeeked.html">BackgroundAudioManager.onSeeked(function callback)</a></h3> <p>监听背景音频完成跳转操作事件</p> <h3 id="BackgroundAudioManager-onEnded-function-callback"><a href="#BackgroundAudioManager-onEnded-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onEnded.html">BackgroundAudioManager.onEnded(function callback)</a></h3> <p>监听背景音频自然播放结束事件</p> <h3 id="BackgroundAudioManager-onStop-function-callback"><a href="#BackgroundAudioManager-onStop-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onStop.html">BackgroundAudioManager.onStop(function callback)</a></h3> <p>监听背景音频停止事件</p> <h3 id="BackgroundAudioManager-onTimeUpdate-function-callback"><a href="#BackgroundAudioManager-onTimeUpdate-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onTimeUpdate.html">BackgroundAudioManager.onTimeUpdate(function callback)</a></h3> <p>监听背景音频播放进度更新事件，只有小程序在前台时会回调。</p> <h3 id="BackgroundAudioManager-onNext-function-callback"><a href="#BackgroundAudioManager-onNext-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onNext.html">BackgroundAudioManager.onNext(function callback)</a></h3> <p>监听用户在系统音乐播放面板点击下一曲事件（仅iOS）</p> <h3 id="BackgroundAudioManager-onPrev-function-callback"><a href="#BackgroundAudioManager-onPrev-function-callback" aria-hidden="true" class="header-anchor">#</a> <a href="./BackgroundAudioManager.onPrev.html">BackgroundAudioManager.onPrev(function callback)</a></h3> <p>监听用户在系统音乐播放面板点击上一曲事件（仅iOS）</p> <h2 id="示例代码"><a href="#示例代码" aria-hidden="true" class="header-anchor">#</a> 示例代码</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> backgroundAudioManager <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getBackgroundAudioManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

backgroundAudioManager<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'此时此刻'</span>
backgroundAudioManager<span class="token punctuation">.</span>epname <span class="token operator">=</span> <span class="token string">'此时此刻'</span>
backgroundAudioManager<span class="token punctuation">.</span>singer <span class="token operator">=</span> <span class="token string">'许巍'</span>
backgroundAudioManager<span class="token punctuation">.</span>coverImgUrl <span class="token operator">=</span> <span class="token string">'http://y.gtimg.cn/music/photo_new/T002R300x300M000003rsKF44GyaSk.jpg?max_age=2592000'</span>
<span class="token comment">// 设置了 src 之后会自动播放</span>
backgroundAudioManager<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3?guid=ffffffff82def4af4b12b3cd9337d5e7&amp;uin=346897220&amp;vkey=6292F51E1E384E061FF02C31F716658E5C81F5594D561F2E88B854E81CAAB7806D5E4F103E55D33C16F3FAC506D1AB172DE8600B37E43FAD&amp;fromtag=46'</span>
</code></pre></div></div></div> <!---->    
</body>
</html>
