<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>组件模版和样式</title>
  <link rel="stylesheet" href="../../style.css" />
  <link rel="stylesheet" href="../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="组件模版和样式">组件模版和样式</h1>
<p>类似于页面，自定义组件拥有自己的 <code>wxml</code> 模版和 <code>wxss</code> 样式。</p>
<h3 id="组件模版">组件模版</h3>
<p>组件模版的写法与页面模板相同。组件模版与组件数据结合后生成的节点树，将被插入到组件的引用位置上。</p>
<p>在组件模板中可以提供一个 <code><slot></code> 节点，用于承载组件引用时提供的子节点。</p>
<p><strong>代码示例：</strong></p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 组件模板 --></span>
<span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">view</span>></span>这里是组件的内部节点<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">slot</span>></span><span class="hljs-tag"></<span class="hljs-name">slot</span>></span>
<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
</code></pre>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 引用组件的页面模版 --></span>
<span class="hljs-tag"><<span class="hljs-name">view</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">component-tag-name</span>></span>
    <span class="hljs-comment"><!-- 这部分内容将被放置在组件 <slot> 的位置上 --></span>
    <span class="hljs-tag"><<span class="hljs-name">view</span>></span>这里是插入到组件slot中的内容<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
  <span class="hljs-tag"></<span class="hljs-name">component-tag-name</span>></span>
<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
</code></pre>
<p>注意，在模版中引用到的自定义组件及其对应的节点名需要在 <code>json</code> 文件中显式定义，否则会被当作一个无意义的节点。除此以外，节点名也可以被声明为<a href="../plugin/generics.md">抽象节点</a>。</p>
<h3 id="组件wxml的slot">组件wxml的slot</h3>
<p>在组件的wxml中可以包含 <code>slot</code> 节点，用于承载组件使用者提供的wxml结构。</p>
<p>默认情况下，一个组件的wxml中只能有一个slot。需要使用多slot时，可以在组件js中声明启用。</p>
<pre><code class="lang-js">Component({
  options: {
    multipleSlots: <span class="hljs-literal">true</span> <span class="hljs-comment">// 在组件定义时的选项中启用多slot支持</span>
  },
  properties: { <span class="hljs-comment">/* ... */</span> },
  methods: { <span class="hljs-comment">/* ... */</span> }
})
</code></pre>
<p>此时，可以在这个组件的wxml中使用多个slot，以不同的 <code>name</code> 来区分。</p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 组件模板 --></span>
<span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"before"</span>></span><span class="hljs-tag"></<span class="hljs-name">slot</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">view</span>></span>这里是组件的内部细节<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"after"</span>></span><span class="hljs-tag"></<span class="hljs-name">slot</span>></span>
<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
</code></pre>
<p>使用时，用 <code>slot</code> 属性来将节点插入到不同的slot上。</p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 引用组件的页面模版 --></span>
<span class="hljs-tag"><<span class="hljs-name">view</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">component-tag-name</span>></span>
    <span class="hljs-comment"><!-- 这部分内容将被放置在组件 <slot name="before"> 的位置上 --></span>
    <span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"before"</span>></span>这里是插入到组件slot name="before"中的内容<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
    <span class="hljs-comment"><!-- 这部分内容将被放置在组件 <slot name="after"> 的位置上 --></span>
    <span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"after"</span>></span>这里是插入到组件slot name="after"中的内容<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
  <span class="hljs-tag"></<span class="hljs-name">component-tag-name</span>></span>
<span class="hljs-tag"></<span class="hljs-name">view</span>></span>
</code></pre>
<h3 id="组件样式">组件样式</h3>
<p>组件对应 <code>wxss</code> 文件的样式，只对组件wxml内的节点生效。编写组件样式时，需要注意以下几点：</p>
<ul>
<li>组件和引用组件的页面不能使用id选择器（<code>#a</code>）、属性选择器（<code>[a]</code>）和标签名选择器，请改用class选择器。</li>
<li>组件和引用组件的页面中使用后代选择器（<code>.a .b</code>）在一些极端情况下会有非预期的表现，如遇，请避免使用。</li>
<li>子元素选择器（<code>.a>.b</code>）只能用于 <code>view</code> 组件与其子节点之间，用于其他组件可能导致非预期的情况。</li>
<li>继承样式，如 <code>font</code> 、 <code>color</code> ，会从组件外继承到组件内。</li>
<li>除继承样式外， <code>app.wxss</code> 中的样式、组件所在页面的的样式对自定义组件无效。</li>
</ul>
<pre><code class="lang-css"><span class="hljs-selector-id">#a</span> { } <span class="hljs-comment">/* 在组件中不能使用 */</span>
<span class="hljs-selector-attr">[a]</span> { } <span class="hljs-comment">/* 在组件中不能使用 */</span>
<span class="hljs-selector-tag">button</span> { } <span class="hljs-comment">/* 在组件中不能使用 */</span>
<span class="hljs-selector-class">.a</span> > <span class="hljs-selector-class">.b</span> { } <span class="hljs-comment">/* 除非 .a 是 view 组件节点，否则不一定会生效 */</span>
</code></pre>
<p>除此以外，组件可以指定它所在节点的默认样式，使用 <code>:host</code> 选择器（需要包含基础库 <a href="../compatibility.html" title="基础库 1.7.2 开始支持，低版本需做兼容处理。">1.7.2</a> 或更高版本的开发者工具支持）。</p>
<p><strong>代码示例：</strong></p>
<pre><code class="lang-css"><span class="hljs-comment">/* 组件 custom-component.wxss */</span>
<span class="hljs-selector-pseudo">:host</span> {
  <span class="hljs-attribute">color</span>: yellow;
}
</code></pre>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 页面的 WXML --></span>
<span class="hljs-tag"><<span class="hljs-name">custom-component</span>></span>这段文本是黄色的<span class="hljs-tag"></<span class="hljs-name">custom-component</span>></span>
</code></pre>
<h3 id="外部样式类">外部样式类</h3>
<p>有时，组件希望接受外部传入的样式类（类似于 <code>view</code> 组件的 <code>hover-class</code> 属性）。此时可以在 <code>Component</code> 中用 <code>externalClasses</code> 定义段定义若干个外部样式类。这个特性从小程序基础库版本 <a href="../compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a> 开始支持。</p>
<p><strong>代码示例：</strong></p>
<pre><code class="lang-js"><span class="hljs-comment">/* 组件 custom-component.js */</span>
Component({
  externalClasses: [<span class="hljs-string">'my-class'</span>]
})
</code></pre>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 组件 custom-component.wxml --></span>
<span class="hljs-tag"><<span class="hljs-name">custom-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-class"</span>></span>这段文本的颜色由组件外的 class 决定<span class="hljs-tag"></<span class="hljs-name">custom-component</span>></span>
</code></pre>
<p>这样，组件的使用者可以指定这个样式类对应的 class ，就像使用普通属性一样。</p>
<p><strong>代码示例：</strong></p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- 页面的 WXML --></span>
<span class="hljs-tag"><<span class="hljs-name">custom-component</span> <span class="hljs-attr">my-class</span>=<span class="hljs-string">"red-text"</span> /></span>
</code></pre>
<pre><code class="lang-css"><span class="hljs-selector-class">.red-text</span> {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
