<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>文件</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="wxsavefileobject">wx.saveFile(OBJECT)</h3>
<p>保存文件到本地。<strong>注意：saveFile 会把临时文件移动，因此调用成功后传入的 tempFilePath 将不可用</strong></p>
<p><strong>OBJECT参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tempFilePath</td>
<td>String</td>
<td>是</td>
<td>需要保存的文件的临时路径</td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>否</td>
<td>返回文件的保存路径，res = {savedFilePath: '文件的保存路径'}</td>
</tr>
<tr>
<td>fail</td>
<td>Function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>success返回参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>savedFilePath</td>
<td>文件的保存路径</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<pre><code class="lang-javascript">wx.chooseImage({
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    <span class="hljs-keyword">var</span> tempFilePaths = res.tempFilePaths
    wx.saveFile({
      tempFilePath: tempFilePaths[<span class="hljs-number">0</span>],
      success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        <span class="hljs-keyword">var</span> savedFilePath = res.savedFilePath
      }
    })
  }
})
</code></pre>
<h4 id="bug--tip">bug & tip</h4>
<ol>
<li><code>tip</code>: 本地文件存储的大小限制为 10M</li>
</ol>
<h3 id="wxgetsavedfilelistobject">wx.getSavedFileList(OBJECT)</h3>
<p>获取本地已保存的文件列表</p>
<p><strong>OBJECT参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>Function</td>
<td>否</td>
<td>接口调用成功的回调函数，返回结果见<code>success返回参数说明</code></td>
</tr>
<tr>
<td>fail</td>
<td>Function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>success返回参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>errMsg</td>
<td>String</td>
<td>接口调用结果</td>
</tr>
<tr>
<td>fileList</td>
<td>Object Array</td>
<td>文件列表</td>
</tr>
</tbody>
</table>
<p><strong>fileList中的项目说明：</strong></p>
<table>
<thead>
<tr>
<th>键</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>filePath</td>
<td>String</td>
<td>文件的本地路径</td>
</tr>
<tr>
<td>createTime</td>
<td>Number</td>
<td>文件的保存时的时间戳，从1970/01/01 08:00:00 到当前时间的秒数</td>
</tr>
<tr>
<td>size</td>
<td>Number</td>
<td>文件大小，单位B</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<pre><code class="lang-javascript">wx.getSavedFileList({
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    <span class="hljs-built_in">console</span>.log(res.fileList)
  }
})
</code></pre>
<h3 id="wxgetsavedfileinfoobject">wx.getSavedFileInfo(OBJECT)</h3>
<p>获取本地文件的文件信息。此接口只能用于获取已保存到本地的文件，若需要获取临时文件信息，请使用 <a href="getFileInfo.html">wx.getFileInfo</a> 接口。</p>
<p><strong>OBJECT参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>filePath</td>
<td>String</td>
<td>是</td>
<td>文件路径</td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>否</td>
<td>接口调用成功的回调函数，返回结果见<code>success返回参数说明</code></td>
</tr>
<tr>
<td>fail</td>
<td>Function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>success返回参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>errMsg</td>
<td>String</td>
<td>接口调用结果</td>
</tr>
<tr>
<td>size</td>
<td>Number</td>
<td>文件大小，单位B</td>
</tr>
<tr>
<td>createTime</td>
<td>Number</td>
<td>文件保存时的时间戳，从1970/01/01 08:00:00 到该时刻的秒数</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<pre><code class="lang-javascript">wx.getSavedFileInfo({
  filePath: <span class="hljs-string">'wxfile://somefile'</span>, <span class="hljs-comment">//仅做示例用，非真正的文件路径</span>
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    <span class="hljs-built_in">console</span>.log(res.size)
    <span class="hljs-built_in">console</span>.log(res.createTime)
  }
})
</code></pre>
<h3 id="wxremovesavedfileobject">wx.removeSavedFile(OBJECT)</h3>
<p>删除本地存储的文件</p>
<p><strong>OBJECT参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>filePath</td>
<td>String</td>
<td>是</td>
<td>需要删除的文件路径</td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>否</td>
<td>接口调用成功的回调函数</td>
</tr>
<tr>
<td>fail</td>
<td>Function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<pre><code class="lang-javascript">wx.getSavedFileList({
  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
    <span class="hljs-keyword">if</span> (res.fileList.length > <span class="hljs-number">0</span>){
      wx.removeSavedFile({
        filePath: res.fileList[<span class="hljs-number">0</span>].filePath,
        complete: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
          <span class="hljs-built_in">console</span>.log(res)
        }
      })
    }
  }
})
</code></pre>
<h3 id="wxopendocumentobject">wx.openDocument(OBJECT)</h3>
<p>新开页面打开文档，支持格式：doc, xls, ppt, pdf, docx, xlsx, pptx</p>
<p><strong>OBJECT参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>必填</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>filePath</td>
<td>String</td>
<td>是</td>
<td>文件路径，可通过 downFile 获得</td>
<td></td>
</tr>
<tr>
<td>fileType</td>
<td>String</td>
<td>否</td>
<td>文件类型，指定文件类型打开文件，有效值 doc, xls, ppt, pdf, docx, xlsx, pptx</td>
<td><a href="../framework/compatibility.html" title="基础库 1.4.0 开始支持，低版本需做兼容处理。">1.4.0</a></td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>Function</td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<h4 id="示例代码">示例代码</h4>
<pre><code class="lang-javascript">wx.downloadFile({
  url: <span class="hljs-string">'http://example.com/somefile.pdf'</span>,
  success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
    <span class="hljs-keyword">var</span> filePath = res.tempFilePath
    wx.openDocument({
      filePath: filePath,
      success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'打开文档成功'</span>)
      }
    })
  }
})
</code></pre>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
