<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <title>camera</title>
  <link rel="stylesheet" href="../../../../../style.css">
  <link rel="stylesheet" href="../../../../../website.css">
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
   <div id="docContent"><div class="content custom"><h1 id="camera"><a href="#camera" aria-hidden="true" class="header-anchor">#</a> camera</h1> <blockquote><p>基础库 1.6.0 开始支持，低版本需做<a href="../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>系统相机。扫码二维码功能，需升级微信客户端至6.7.3。需要<a href="../framework/open-ability/authorize.html">用户授权</a> <code>scope.camera</code>。
<a href="../framework/compatibility.html">2.10.0</a>起 initdone 事件返回 maxZoom，最大变焦范围，相关接口 <a href="../api/media/camera/CameraContext.setZoom.html">CameraContext.setZoom</a>。</p> <p>相关api：<a href="../api/media/camera/wx.createCameraContext.html">wx.createCameraContext</a></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>必填</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>mode</td> <td>string</td> <td>normal</td> <td>否</td> <td>应用模式，只在初始化时有效，不能动态变更</td> <td><a href="../framework/compatibility.html">2.1.0</a></td></tr> <tr><td>resolution</td> <td>string</td> <td>medium</td> <td>否</td> <td>分辨率，不支持动态修改</td> <td><a href="../framework/compatibility.html">2.10.0</a></td></tr> <tr><td>device-position</td> <td>string</td> <td>back</td> <td>否</td> <td>摄像头朝向</td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr> <tr><td>flash</td> <td>string</td> <td>auto</td> <td>否</td> <td>闪光灯，值为auto, on, off</td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr> <tr><td>frame-size</td> <td>string</td> <td>medium</td> <td>否</td> <td>指定期望的相机帧数据尺寸</td> <td><a href="../framework/compatibility.html">2.7.0</a></td></tr> <tr><td>bindstop</td> <td>eventhandle</td> <td></td> <td>否</td> <td>摄像头在非正常终止时触发，如退出后台等情况</td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr> <tr><td>binderror</td> <td>eventhandle</td> <td></td> <td>否</td> <td>用户不允许使用摄像头时触发</td> <td><a href="../framework/compatibility.html">1.0.0</a></td></tr> <tr><td>bindinitdone</td> <td>eventhandle</td> <td></td> <td>否</td> <td>相机初始化完成时触发，<code>e.detail = {maxZoom}</code></td> <td><a href="../framework/compatibility.html">2.7.0</a></td></tr> <tr><td>bindscancode</td> <td>eventhandle</td> <td></td> <td>否</td> <td>在扫码识别成功时触发，仅在 mode="scanCode" 时生效</td> <td><a href="../framework/compatibility.html">2.1.0</a></td></tr></tbody></table></div><p><strong>mode 的合法值</strong></p> <div class="table-wrp"><table><thead><tr><th>值</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>normal</td> <td>相机模式</td> <td></td></tr> <tr><td>scanCode</td> <td>扫码模式</td> <td></td></tr></tbody></table></div><p><strong>resolution 的合法值</strong></p> <div class="table-wrp"><table><thead><tr><th>值</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>low</td> <td>低</td> <td></td></tr> <tr><td>medium</td> <td>中</td> <td></td></tr> <tr><td>high</td> <td>高</td> <td></td></tr></tbody></table></div><p><strong>device-position 的合法值</strong></p> <div class="table-wrp"><table><thead><tr><th>值</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>front</td> <td>前置</td> <td></td></tr> <tr><td>back</td> <td>后置</td> <td></td></tr></tbody></table></div><p><strong>flash 的合法值</strong></p> <div class="table-wrp"><table><thead><tr><th>值</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>auto</td> <td>自动</td> <td></td></tr> <tr><td>on</td> <td>打开</td> <td></td></tr> <tr><td>off</td> <td>关闭</td> <td></td></tr> <tr><td>torch</td> <td>常亮</td> <td><a href="../framework/compatibility.html">2.8.0</a></td></tr></tbody></table></div><p><strong>frame-size 的合法值</strong></p> <div class="table-wrp"><table><thead><tr><th>值</th> <th>说明</th> <th>最低版本</th></tr></thead> <tbody><tr><td>small</td> <td>小尺寸帧数据</td> <td></td></tr> <tr><td>medium</td> <td>中尺寸帧数据</td> <td></td></tr> <tr><td>large</td> <td>大尺寸帧数据</td> <td></td></tr></tbody></table></div><h2 id="Bug-Tip"><a href="#Bug-Tip" aria-hidden="true" class="header-anchor">#</a> Bug &amp; Tip</h2> <ol><li><code>tip</code>: 同一页面只能插入一个 <code>camera</code> 组件</li> <li><code>tip</code>:请注意<a href="native-component.html#%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6">原生组件使用限制</a></li> <li><code>tip</code>:onCameraFrame 接口根据 frame-size 返回不同尺寸的原始帧数据，与 Camera 组件展示的图像不同，其实际像素值由系统决定</li></ol> <h2 id="示例代码"><a href="#示例代码" aria-hidden="true" class="header-anchor">#</a> 示例代码</h2> <p><a href="https://developers.weixin.qq.com/s/VBZ3Jim26zYu" title="在开发者工具中预览效果" target="_blank" rel="noopener noreferrer">在开发者工具中预览效果<span></span></a></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- camera.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>camera</span> <span class="token attr-name">device-position</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>back<span class="token punctuation">"</span></span> <span class="token attr-name">flash</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>off<span class="token punctuation">"</span></span> <span class="token attr-name">binderror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>camera</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>takePhoto<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>拍照<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>预览<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>widthFix<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{{src}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// camera.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">takePhoto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCameraContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">takePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      quality<span class="token punctuation">:</span> <span class="token string">'high'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          src<span class="token punctuation">:</span> res<span class="token punctuation">.</span>tempImagePath
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div></div> <!---->    


</body></html>