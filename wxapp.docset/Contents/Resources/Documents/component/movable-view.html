<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <title>movable-view</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../website.css">
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h4 id="movable-area">movable-area</h4>
<blockquote>
<p>基础库 1.2.0 开始支持，低版本需做<a href="../framework/compatibility.html">兼容处理</a></p>
</blockquote>
<p><code>movable-view</code> 的可移动区域</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td id="movable-view-scale-area">scale-area</td>
<td>Boolean</td>
<td>false</td>
<td>当里面的movable-view设置为支持双指缩放时，设置此值可将缩放手势生效区域修改为整个movable-area</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
</tbody>
</table>
<p><strong>注意：movable-area 必须设置width和height属性，不设置默认为10px</strong></p>
<h4 id="movable-view">movable-view</h4>
<blockquote>
<p>基础库 1.2.0 开始支持，低版本需做<a href="../framework/compatibility.html">兼容处理</a></p>
</blockquote>
<p>可移动的视图容器，在页面中可以拖拽滑动</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td id="movable-view-direction">direction</td>
<td>String</td>
<td>none</td>
<td>movable-view的移动方向，属性值有all、vertical、horizontal、none</td>
<td></td>
</tr>
<tr>
<td id="movable-view-inertia">inertia</td>
<td>Boolean</td>
<td>false</td>
<td>movable-view是否带有惯性</td>
<td></td>
</tr>
<tr>
<td id="movable-view-out-of-bounds">out-of-bounds</td>
<td>Boolean</td>
<td>false</td>
<td>超过可移动区域后，movable-view是否还可以移动</td>
<td></td>
</tr>
<tr>
<td id="movable-view-x">x</td>
<td>Number / String</td>
<td></td>
<td>定义x轴方向的偏移，如果x的值不在可移动范围内，会自动移动到可移动范围；改变x的值会触发动画</td>
<td></td>
</tr>
<tr>
<td id="movable-view-y">y</td>
<td>Number / String</td>
<td></td>
<td>定义y轴方向的偏移，如果y的值不在可移动范围内，会自动移动到可移动范围；改变y的值会触发动画</td>
<td></td>
</tr>
<tr>
<td id="movable-view-damping">damping</td>
<td>Number</td>
<td>20</td>
<td>阻尼系数，用于控制x或y改变时的动画和过界回弹的动画，值越大移动越快</td>
<td></td>
</tr>
<tr>
<td id="movable-view-friction">friction</td>
<td>Number</td>
<td>2</td>
<td>摩擦系数，用于控制惯性滑动的动画，值越大摩擦力越大，滑动越快停止；必须大于0，否则会被设置成默认值</td>
<td></td>
</tr>
<tr>
<td id="movable-view-disabled">disabled</td>
<td>Boolean</td>
<td>false</td>
<td>是否禁用</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td id="movable-view-scale">scale</td>
<td>Boolean</td>
<td>false</td>
<td>是否支持双指缩放，默认缩放手势生效区域是在movable-view内</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td id="movable-view-scale-min">scale-min</td>
<td>Number</td>
<td>0.5</td>
<td>定义缩放倍数最小值</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td id="movable-view-scale-max">scale-max</td>
<td>Number</td>
<td>10</td>
<td>定义缩放倍数最大值</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td id="movable-view-scale-value">scale-value</td>
<td>Number</td>
<td>1</td>
<td>定义缩放倍数，取值范围为 0.5 - 10</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td id="movable-view-bindchange">bindchange</td>
<td>EventHandle</td>
<td></td>
<td>完成一次拖动后触发的事件，event.detail = {x: x, y: y, source: source}，其中source表示产生移动的原因，值可为touch（拖动）、touch-out-of-bounds（超出移动范围）、out-of-bounds（超出移动范围后的回弹）、friction（惯性）和空字符串（setData）</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td id="movable-view-bindscale">bindscale</td>
<td>EventHandle</td>
<td></td>
<td>完成一次拖动后触发的事件，event.detail = {scale: scale}</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
</tbody>
</table>
<p>除了基本事件外，movable-view提供了两个特殊事件</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>触发条件</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>htouchmove</td>
<td>初次手指触摸后移动为横向的移动，如果catch此事件，则意味着touchmove事件也被catch</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
<tr>
<td>vtouchmove</td>
<td>初次手指触摸后移动为纵向的移动，如果catch此事件，则意味着touchmove事件也被catch</td>
<td><a href="../framework/compatibility.html" title="基础库 1.9.90 开始支持，低版本需做兼容处理。">1.9.90</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>movable-view 必须设置width和height属性，不设置默认为10px</p>
<p>movable-view 默认为绝对定位，top和left属性为0px</p>
<p>当movable-view小于movable-area时，movable-view的移动范围是在movable-area内；当movable-view大于movable-area时，movable-view的移动范围必须包含movable-area（x轴方向和y轴方向分开考虑）</p>
</blockquote>
<p><strong>注意</strong>：movable-view必须在<code><movable-area></movable-area></code>组件中，并且必须是直接子节点，否则不能移动。</p>
<p><strong>示例代码：</strong></p>
<p><a href="wechatide://minicode/7QWXwimf6PYG" target="_blank">在开发者工具中预览效果</a></p>
<pre><code class="lang-html"><span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section"</span>></span>
  <span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section__title"</span>></span>movable-view区域小于movable-area<span class="hljs-tag"><!--<span class="hljs-name"-->view</span>>
  <span class="hljs-tag"><<span class="hljs-name">movable-area</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 200px; width: 200px; background: red;"</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">movable-view</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 50px; width: 50px; background: blue;"</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"{{x}}"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"{{y}}"</span> <span class="hljs-attr">direction</span>=<span class="hljs-string">"all"</span>></span>
    <span class="hljs-tag"><!--<span class="hljs-name"-->movable-view</span>>
  <span class="hljs-tag"><!--<span class="hljs-name"-->movable-area</span>>
  <span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-area"</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"mini"</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"tap"</span>></span>click me to move to (30px, 30px)<span class="hljs-tag"><!--<span class="hljs-name"-->button</span>>
  <span class="hljs-tag"><!--<span class="hljs-name"-->view</span>>
  <span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section__title"</span>></span>movable-view区域大于movable-area<span class="hljs-tag"><!--<span class="hljs-name"-->view</span>>
  <span class="hljs-tag"><<span class="hljs-name">movable-area</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 100px; width: 100px; background: red;"</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">movable-view</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 200px; width: 200px; background: blue;"</span> <span class="hljs-attr">direction</span>=<span class="hljs-string">"all"</span>></span>
    <span class="hljs-tag"><!--<span class="hljs-name"-->movable-view</span>>
  <span class="hljs-tag"><!--<span class="hljs-name"-->movable-area</span>>
  <span class="hljs-tag"><<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"section__title"</span>></span>可放缩<span class="hljs-tag"><!--<span class="hljs-name"-->view</span>>
  <span class="hljs-tag"><<span class="hljs-name">movable-area</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 200px; width: 200px; background: red;"</span> <span class="hljs-attr">scale-area</span>></span>
    <span class="hljs-tag"><<span class="hljs-name">movable-view</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 50px; width: 50px; background: blue;"</span> <span class="hljs-attr">direction</span>=<span class="hljs-string">"all"</span> <span class="hljs-attr">bindchange</span>=<span class="hljs-string">"onChange"</span> <span class="hljs-attr">bindscale</span>=<span class="hljs-string">"onScale"</span> <span class="hljs-attr">scale</span> <span class="hljs-attr">scale-min</span>=<span class="hljs-string">"0.5"</span> <span class="hljs-attr">scale-max</span>=<span class="hljs-string">"4"</span> <span class="hljs-attr">scale-value</span>=<span class="hljs-string">"2"</span>></span>
    <span class="hljs-tag"><!--<span class="hljs-name"-->movable-view</span>>
  <span class="hljs-tag"><!--<span class="hljs-name"-->movable-area</span>>
<span class="hljs-tag"><!--<span class="hljs-name"-->view</span>>
</code></pre>
<pre><code class="lang-javascript">Page({
  data: {
    x: <span class="hljs-number">0</span>,
    y: <span class="hljs-number">0</span>
  },
  tap: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">this</span>.setData({
      x: <span class="hljs-number">30</span>,
      y: <span class="hljs-number">30</span>
    });
  },
  onChange: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-built_in">console</span>.log(e.detail)
  },
  onScale: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-built_in">console</span>.log(e.detail)
  }
})
</code></pre>

                                
                                </section>
                            
    </div>
    
</div>

                        


</body></html>