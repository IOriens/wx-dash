<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>使用插件</title>
  <link rel="stylesheet" href="../../style.css" />
  <link rel="stylesheet" href="../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="使用插件">使用插件</h1>
<h2 id="申请使用插件">申请使用插件</h2>
<p>在使用插件前，首先要在小程序管理后台的“设置-第三方服务-插件管理”中添加插件。开发者可登录小程序管理后台，通过 appId 查找插件并添加。插件开发者通过申请后，方可在小程序中使用相应的插件。</p>
<h2 id="引入插件代码包">引入插件代码包</h2>
<p>对于插件的使用者，使用插件前要在 <code>app.json</code> 中声明需要使用的插件，例如：</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"plugins"</span>: {
    <span class="hljs-string">"myPlugin"</span>: {
      <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
      <span class="hljs-string">"provider"</span>: <span class="hljs-string">"wxxxxxxxxxxxxxxxxx"</span>
    }
  }
}
</code></pre>
<p>如上例所示， <code>plugins</code> 定义段中可以包含多个插件声明，每个插件声明中都必须指明插件的 appid 和需要使用的版本号。</p>
<h2 id="使用插件的-js-接口">使用插件的 js 接口</h2>
<p>在引入插件代码包之后，就可以在这个小程序中使用插件提供的自定义组件或者 js 接口。</p>
<p>如果需要使用插件的 js 接口，可以使用 <code>requirePlugin</code> 方法：</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myPluginInterface = requirePlugin(<span class="hljs-string">'myPlugin'</span>)

myPluginInterface.hello()
</code></pre>
<h2 id="使用插件的自定义组件">使用插件的自定义组件</h2>
<p>使用插件提供的自定义组件，和使用普通自定义组件的方式相仿。在 <code>json</code> 文件定义需要引入的自定义组件时，使用 <code>plugin://</code> 协议即可，例如：</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"usingComponents"</span>: {
    <span class="hljs-string">"hello-component"</span>: <span class="hljs-string">"plugin://myPlugin/hello-component"</span>
  }
}
</code></pre>
<p>出于对插件的保护，插件提供的自定义组件在使用上有一定的限制：</p>
<ul>
<li>页面中的 <code>this.selectComponent</code> 接口无法获得插件的自定义组件实例对象；</li>
<li><code>wx.createSelectorQuery</code> 等接口的 <code>>>></code> 选择器无法选入插件内部。</li>
</ul>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
