<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>获取界面上的节点信息</title>
  <link rel="stylesheet" href="../../../style.css" />
  <link rel="stylesheet" href="../../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                    <div id="book-search-results">
                        <div class="search-noresults">
                            <section class="normal markdown-section">
                              <h1 id="&#x83B7;&#x53D6;&#x754C;&#x9762;&#x4E0A;&#x7684;&#x8282;&#x70B9;&#x4FE1;&#x606F;">&#x83B7;&#x53D6;&#x754C;&#x9762;&#x4E0A;&#x7684;&#x8282;&#x70B9;&#x4FE1;&#x606F;</h1>
<h2 id="wxml&#x8282;&#x70B9;&#x4FE1;&#x606F;">WXML&#x8282;&#x70B9;&#x4FE1;&#x606F;</h2>
<p><a href="../../api/wx.createSelectorQuery.html">&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x67E5;&#x8BE2; API</a> &#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x83B7;&#x53D6;&#x8282;&#x70B9;&#x5C5E;&#x6027;&#x3001;&#x6837;&#x5F0F;&#x3001;&#x5728;&#x754C;&#x9762;&#x4E0A;&#x7684;&#x4F4D;&#x7F6E;&#x7B49;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x6700;&#x5E38;&#x89C1;&#x7684;&#x7528;&#x6CD5;&#x662F;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x6765;&#x67E5;&#x8BE2;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#xFF0C;&#x4EE5;&#x53CA;&#x754C;&#x9762;&#x7684;&#x6EDA;&#x52A8;&#x4F4D;&#x7F6E;&#x3002;</p>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> query = wx.createSelectorQuery()
query.select(<span class="hljs-string">&apos;#the-id&apos;</span>).boundingClientRect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
  res.top <span class="hljs-comment">// #the-id &#x8282;&#x70B9;&#x7684;&#x4E0A;&#x8FB9;&#x754C;&#x5750;&#x6807;&#xFF08;&#x76F8;&#x5BF9;&#x4E8E;&#x663E;&#x793A;&#x533A;&#x57DF;&#xFF09;</span>
})
query.selectViewport().scrollOffset(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{
  res.scrollTop <span class="hljs-comment">// &#x663E;&#x793A;&#x533A;&#x57DF;&#x7684;&#x7AD6;&#x76F4;&#x6EDA;&#x52A8;&#x4F4D;&#x7F6E;</span>
})
query.exec()
</code></pre>
<p>&#x4E0A;&#x8FF0;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C; <code>#the-id</code> &#x662F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x9009;&#x62E9;&#x5668;&#xFF0C;&#x4E0E; CSS &#x7684;&#x9009;&#x62E9;&#x5668;&#x76F8;&#x8FD1;&#x4F46;&#x7565;&#x6709;&#x533A;&#x522B;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1; <a href="../../api/SelectorQuery.select.html">SelectorQuery.select</a> &#x7684;&#x76F8;&#x5173;&#x8BF4;&#x660E;&#x3002;</p>
<p>&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528; <code>this.createSelectorQuery</code> &#x6765;&#x4EE3;&#x66FF; <a href="../../api/wx.createSelectorQuery.html"><code>wx.createSelectorQuery</code></a> &#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x5C06;&#x9009;&#x62E9;&#x5668;&#x9009;&#x53D6;&#x8303;&#x56F4;&#x5B9A;&#x5728;&#x8FD9;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x5185;&#x3002;</p>
<h2 id="wxml&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x76F8;&#x4EA4;&#x72B6;&#x6001;">WXML&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x76F8;&#x4EA4;&#x72B6;&#x6001;</h2>
<p><a href="../../api/wx.createIntersectionObserver.html">&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x76F8;&#x4EA4;&#x72B6;&#x6001; API</a> &#x53EF;&#x7528;&#x4E8E;&#x76D1;&#x542C;&#x4E24;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EC4;&#x4EF6;&#x8282;&#x70B9;&#x5728;&#x5E03;&#x5C40;&#x4F4D;&#x7F6E;&#x4E0A;&#x7684;&#x76F8;&#x4EA4;&#x72B6;&#x6001;&#x3002;&#x8FD9;&#x4E00;&#x7EC4;API&#x5E38;&#x5E38;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x63A8;&#x65AD;&#x67D0;&#x4E9B;&#x8282;&#x70B9;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6237;&#x770B;&#x89C1;&#x3001;&#x6709;&#x591A;&#x5927;&#x6BD4;&#x4F8B;&#x53EF;&#x4EE5;&#x88AB;&#x7528;&#x6237;&#x770B;&#x89C1;&#x3002;</p>
<p>&#x8FD9;&#x4E00;&#x7EC4;API&#x6D89;&#x53CA;&#x7684;&#x4E3B;&#x8981;&#x6982;&#x5FF5;&#x5982;&#x4E0B;&#x3002;</p>
<ul>
<li>&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF1A;&#x76D1;&#x542C;&#x7684;&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF0C;&#x53D6;&#x5B83;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x3002;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x4F1A;&#x53D6;&#x5B83;&#x4EEC;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684; <strong>&#x4EA4;&#x96C6;</strong> &#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x3002;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x4E5F;&#x53EF;&#x4F5C;&#x4E3A;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x4E4B;&#x4E00;&#x3002;</li>
<li>&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF1A;&#x76D1;&#x542C;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x9ED8;&#x8BA4;&#x53EA;&#x80FD;&#x662F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF08;&#x4F7F;&#x7528; <code>selectAll</code> &#x9009;&#x9879;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x76D1;&#x542C;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x3002;</li>
<li>&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#xFF1A;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x4E0E;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x7684;&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x3002;</li>
<li>&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;&#xFF1A;&#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x53C2;&#x7167;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;&#x3002;</li>
<li>&#x9608;&#x503C;&#xFF1A;&#x76F8;&#x4EA4;&#x6BD4;&#x4F8B;&#x5982;&#x679C;&#x8FBE;&#x5230;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x4F1A;&#x89E6;&#x53D1;&#x76D1;&#x542C;&#x5668;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;&#x9608;&#x503C;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x3002;</li>
</ul>
<p>&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5728;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.target-class</code> &#x6307;&#x5B9A;&#xFF09;&#x6BCF;&#x6B21;&#x8FDB;&#x5165;&#x6216;&#x79BB;&#x5F00;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x65F6;&#xFF0C;&#x89E6;&#x53D1;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</strong></p>
<pre><code class="language-js">Page({
  onLoad() {
    wx.createIntersectionObserver().relativeToViewport().observe(<span class="hljs-string">&apos;.target-class&apos;</span>, (res) =&gt; {
      res.id <span class="hljs-comment">// &#x76EE;&#x6807;&#x8282;&#x70B9; id</span>
      res.dataset <span class="hljs-comment">// &#x76EE;&#x6807;&#x8282;&#x70B9; dataset</span>
      res.intersectionRatio <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;</span>
      res.intersectionRect <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;</span>
      res.intersectionRect.left <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5DE6;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.top <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x4E0A;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.width <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5BBD;&#x5EA6;</span>
      res.intersectionRect.height <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x9AD8;&#x5EA6;</span>
    })
  }
})
</code></pre>
<p>&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5728;&#x76EE;&#x6807;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.target-class</code> &#x6307;&#x5B9A;&#xFF09;&#x4E0E;&#x53C2;&#x7167;&#x8282;&#x70B9;&#xFF08;&#x7528;&#x9009;&#x62E9;&#x5668; <code>.relative-class</code> &#x6307;&#x5B9A;&#xFF09;&#x5728;&#x9875;&#x9762;&#x663E;&#x793A;&#x533A;&#x57DF;&#x5185;&#x76F8;&#x4EA4;&#x6216;&#x76F8;&#x79BB;&#xFF0C;&#x4E14;&#x76F8;&#x4EA4;&#x6216;&#x76F8;&#x79BB;&#x7A0B;&#x5EA6;&#x8FBE;&#x5230;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;20%&#x548C;50%&#x65F6;&#xFF0C;&#x89E6;&#x53D1;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p><strong>&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</strong></p>
<pre><code class="language-js">Page({
  onLoad() {
    wx.createIntersectionObserver(<span class="hljs-keyword">this</span>, {
      <span class="hljs-attr">thresholds</span>: [<span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span>]
    }).relativeTo(<span class="hljs-string">&apos;.relative-class&apos;</span>).relativeToViewport().observe(<span class="hljs-string">&apos;.target-class&apos;</span>, (res) =&gt; {
      res.intersectionRatio <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x5360;&#x76EE;&#x6807;&#x8282;&#x70B9;&#x7684;&#x5E03;&#x5C40;&#x533A;&#x57DF;&#x7684;&#x6BD4;&#x4F8B;</span>
      res.intersectionRect <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;</span>
      res.intersectionRect.left <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5DE6;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.top <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x4E0A;&#x8FB9;&#x754C;&#x5750;&#x6807;</span>
      res.intersectionRect.width <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x5BBD;&#x5EA6;</span>
      res.intersectionRect.height <span class="hljs-comment">// &#x76F8;&#x4EA4;&#x533A;&#x57DF;&#x7684;&#x9AD8;&#x5EA6;</span>
    })
  }
})
</code></pre>
<p>&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528; <code>this.createIntersectionObserver</code> &#x6765;&#x4EE3;&#x66FF; <a href="../../api/wx.createIntersectionObserver.html"><code>wx.createIntersectionObserver</code></a> &#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x5C06;&#x9009;&#x62E9;&#x5668;&#x9009;&#x53D6;&#x8303;&#x56F4;&#x5B9A;&#x5728;&#x8FD9;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x5185;&#x3002;</p>

                            </section>
                        </div>
                        
                    </div>
                
</body>
</html>
