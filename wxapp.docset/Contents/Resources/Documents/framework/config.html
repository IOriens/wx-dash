<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>配置</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="配置">配置</h1>
<p><code>app.json</code>文件用来对微信小程序进行全局配置，决定页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等。</p>
<p>以下是一个包含了所有配置选项的 <code>app.json</code> ：</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"pages"</span>: [
    <span class="hljs-string">"pages/index/index"</span>,
    <span class="hljs-string">"pages/logs/index"</span>
  ],
  <span class="hljs-string">"window"</span>: {
    <span class="hljs-string">"navigationBarTitleText"</span>: <span class="hljs-string">"Demo"</span>
  },
  <span class="hljs-string">"tabBar"</span>: {
    <span class="hljs-string">"list"</span>: [{
      <span class="hljs-string">"pagePath"</span>: <span class="hljs-string">"pages/index/index"</span>,
      <span class="hljs-string">"text"</span>: <span class="hljs-string">"首页"</span>
    }, {
      <span class="hljs-string">"pagePath"</span>: <span class="hljs-string">"pages/logs/logs"</span>,
      <span class="hljs-string">"text"</span>: <span class="hljs-string">"日志"</span>
    }]
  },
  <span class="hljs-string">"networkTimeout"</span>: {
    <span class="hljs-string">"request"</span>: <span class="hljs-number">10000</span>,
    <span class="hljs-string">"downloadFile"</span>: <span class="hljs-number">10000</span>
  },
  <span class="hljs-string">"debug"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h3 id="appjson-配置项列表">app.json 配置项列表</h3>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#pages">pages</a></td>
<td>String Array</td>
<td>是</td>
<td>设置页面路径</td>
</tr>
<tr>
<td><a href="#window">window</a></td>
<td>Object</td>
<td>否</td>
<td>设置默认页面的窗口表现</td>
</tr>
<tr>
<td><a href="#tabbar">tabBar</a></td>
<td>Object</td>
<td>否</td>
<td>设置底部 tab 的表现</td>
</tr>
<tr>
<td><a href="#networktimeout">networkTimeout</a></td>
<td>Object</td>
<td>否</td>
<td>设置网络超时时间</td>
</tr>
<tr>
<td><a href="#debug">debug</a></td>
<td>Boolean</td>
<td>否</td>
<td>设置是否开启 debug 模式</td>
</tr>
</tbody>
</table>
<h3 id="pages">pages</h3>
<p>接受一个数组，每一项都是字符串，来指定小程序由哪些页面组成。每一项代表对应页面的【路径+文件名】信息，<strong>数组的第一项代表小程序的初始页面。小程序中新增/减少页面，都需要对 pages 数组进行修改。</strong></p>
<p>文件名不需要写文件后缀，因为框架会自动去寻找路径下 <code>.json</code>, <code>.js</code>, <code>.wxml</code>, <code>.wxss</code> 四个文件进行整合。</p>
<p>如开发目录为：</p>
<blockquote>
<p>pages/</p>
<p>pages/index/index.wxml</p>
<p>pages/index/index.js</p>
<p>pages/index/index.wxss</p>
<p>pages/logs/logs.wxml</p>
<p>pages/logs/logs.js</p>
<p>app.js</p>
<p>app.json</p>
<p>app.wxss</p>
</blockquote>
<p>则需要在 app.json 中写</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"pages"</span>:[
    <span class="hljs-string">"pages/index/index"</span>,
    <span class="hljs-string">"pages/logs/logs"</span>
  ]
}
</code></pre>
<h3 id="window">window</h3>
<p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>navigationBarBackgroundColor</td>
<td>HexColor</td>
<td>#000000</td>
<td>导航栏背景颜色，如"#000000"</td>
<td></td>
</tr>
<tr>
<td>navigationBarTextStyle</td>
<td>String</td>
<td>white</td>
<td>导航栏标题颜色，仅支持 black/white</td>
<td></td>
</tr>
<tr>
<td>navigationBarTitleText</td>
<td>String</td>
<td></td>
<td>导航栏标题文字内容</td>
<td></td>
</tr>
<tr>
<td>navigationStyle</td>
<td>String</td>
<td>default</td>
<td>导航栏样式，仅支持 default/custom。custom 模式可自定义导航栏，只保留右上角胶囊状的按钮</td>
<td>微信版本 6.6.0</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>#ffffff</td>
<td>窗口的背景色</td>
<td></td>
</tr>
<tr>
<td>backgroundTextStyle</td>
<td>String</td>
<td>dark</td>
<td>下拉 loading 的样式，仅支持 dark/light</td>
<td></td>
</tr>
<tr>
<td>backgroundColorTop</td>
<td>String</td>
<td>#ffffff</td>
<td>顶部窗口的背景色，仅 iOS 支持</td>
<td>微信版本 6.5.16</td>
</tr>
<tr>
<td>backgroundColorBottom</td>
<td>String</td>
<td>#ffffff</td>
<td>底部窗口的背景色，仅 iOS 支持</td>
<td>微信版本 6.5.16</td>
</tr>
<tr>
<td>enablePullDownRefresh</td>
<td>Boolean</td>
<td>false</td>
<td>是否开启下拉刷新，详见<a href="app-service/page.html#页面相关事件处理函数">页面相关事件处理函数</a></td>
<td></td>
</tr>
<tr>
<td>onReachBottomDistance</td>
<td>Number</td>
<td>50</td>
<td>页面上拉触底事件触发时距页面底部距离，单位为px</td>
</tr>
</tbody>
</table>
<p><strong>注：HexColor（十六进制颜色值），如"#ff00ff"</strong></p>
<p><strong>注：navigationStyle 只在 app.json 中生效。开启 custom 后，低版本客户端需要做好兼容。开发者工具基础库版本切到 1.7.0（不代表最低版本，只供调试用） 可方便切到旧视觉</strong></p>
<p>如 app.json ：</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"window"</span>:{
    <span class="hljs-string">"navigationBarBackgroundColor"</span>: <span class="hljs-string">"#ffffff"</span>,
    <span class="hljs-string">"navigationBarTextStyle"</span>: <span class="hljs-string">"black"</span>,
    <span class="hljs-string">"navigationBarTitleText"</span>: <span class="hljs-string">"微信接口功能演示"</span>,
    <span class="hljs-string">"backgroundColor"</span>: <span class="hljs-string">"#eeeeee"</span>,
    <span class="hljs-string">"backgroundTextStyle"</span>: <span class="hljs-string">"light"</span>
  }
}
</code></pre>
<p><img src="https://mp.weixin.qq.com/debug/wxadoc/dev/image/config.jpg?t=2018413" alt=""></p>
<h3 id="tabbar">tabBar</h3>
<p>如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p>
<p><strong>Tip：</strong></p>
<ol>
<li>当设置 position 为 top 时，将不会显示 icon</li>
<li>tabBar 中的 list 是一个数组，<strong>只能配置最少2个、最多5个 tab</strong>，tab 按数组的顺序排序。</li>
</ol>
<p><strong>属性说明：</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>color</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 上的文字默认颜色</td>
</tr>
<tr>
<td>selectedColor</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 上的文字选中时的颜色</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 的背景色</td>
</tr>
<tr>
<td>borderStyle</td>
<td>String</td>
<td>否</td>
<td>black</td>
<td>tabbar上边框的颜色， 仅支持 black/white</td>
</tr>
<tr>
<td>list</td>
<td>Array</td>
<td>是</td>
<td></td>
<td>tab 的列表，详见 list 属性说明，最少2个、最多5个 tab</td>
</tr>
<tr>
<td>position</td>
<td>String</td>
<td>否</td>
<td>bottom</td>
<td>可选值 bottom、top</td>
</tr>
</tbody>
</table>
<p>其中 list 接受一个数组，数组中的每个项都是一个对象，其属性值如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>pagePath</td>
<td>String</td>
<td>是</td>
<td>页面路径，必须在 pages 中先定义</td>
</tr>
<tr>
<td>text</td>
<td>String</td>
<td>是</td>
<td>tab 上按钮文字</td>
</tr>
<tr>
<td>iconPath</td>
<td>String</td>
<td>否</td>
<td>图片路径，icon 大小限制为40kb，建议尺寸为 81px * 81px，当 postion 为 top 时，此参数无效，不支持网络图片</td>
</tr>
<tr>
<td>selectedIconPath</td>
<td>String</td>
<td>否</td>
<td>选中时的图片路径，icon 大小限制为40kb，建议尺寸为 81px * 81px ，当 postion 为 top 时，此参数无效</td>
</tr>
</tbody>
</table>
<p><img src="https://mp.weixin.qq.com/debug/wxadoc/dev/image/tabbar.png?t=2018413" alt=""></p>
<h3 id="networktimeout">networkTimeout</h3>
<p>可以设置各种网络请求的超时时间。</p>
<p><strong>属性说明：</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td>Number</td>
<td>否</td>
<td><a href="../api/network-request.html">wx.request</a>的超时时间，单位毫秒，默认为：60000</td>
</tr>
<tr>
<td>connectSocket</td>
<td>Number</td>
<td>否</td>
<td><a href="../api/network-socket.html">wx.connectSocket</a>的超时时间，单位毫秒，默认为：60000</td>
</tr>
<tr>
<td>uploadFile</td>
<td>Number</td>
<td>否</td>
<td><a href="../api/network-file.html#wxuploadfileobject">wx.uploadFile</a>的超时时间，单位毫秒，默认为：60000</td>
</tr>
<tr>
<td>downloadFile</td>
<td>Number</td>
<td>否</td>
<td><a href="../api/network-file.html#wxdownloadfileobject">wx.downloadFile</a>的超时时间，单位毫秒，默认为：60000</td>
</tr>
</tbody>
</table>
<h3 id="debug">debug</h3>
<p>可以在开发者工具中开启 debug 模式，在开发者工具的控制台面板，调试信息以 info 的形式给出，其信息有<code>Page的注册</code>，<code>页面路由</code>，<code>数据更新</code>，<code>事件触发</code> 。 可以帮助开发者快速定位一些常见的问题。</p>
<h2 id="pagejson">page.json</h2>
<p>每一个小程序页面也可以使用<code>.json</code>文件来对本页面的窗口表现进行配置。    页面的配置比<code>app.json</code>全局配置简单得多，只是设置 app.json 中的 window 配置项的内容，页面中配置项会覆盖 app.json 的 window 中相同的配置项。</p>
<p>页面的<code>.json</code>只能设置 <code>window</code> 相关的配置项，以决定本页面的窗口表现，所以无需写 <code>window</code> 这个键，如：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>navigationBarBackgroundColor</td>
<td>HexColor</td>
<td>#000000</td>
<td>导航栏背景颜色，如"#000000"</td>
</tr>
<tr>
<td>navigationBarTextStyle</td>
<td>String</td>
<td>white</td>
<td>导航栏标题颜色，仅支持 black/white</td>
</tr>
<tr>
<td>navigationBarTitleText</td>
<td>String</td>
<td></td>
<td>导航栏标题文字内容</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>#ffffff</td>
<td>窗口的背景色</td>
</tr>
<tr>
<td>backgroundTextStyle</td>
<td>String</td>
<td>dark</td>
<td>下拉 loading 的样式，仅支持 dark/light</td>
<td></td>
</tr>
<tr>
<td>enablePullDownRefresh</td>
<td>Boolean</td>
<td>false</td>
<td>是否开启下拉刷新，详见<a href="app-service/page.html#页面相关事件处理函数">页面相关事件处理函数</a>。</td>
</tr>
<tr>
<td>disableScroll</td>
<td>Boolean</td>
<td>false</td>
<td>设置为 true 则页面整体不能上下滚动；只在 page.json 中有效，无法在 app.json 中设置该项</td>
</tr>
<tr>
<td>onReachBottomDistance</td>
<td>Number</td>
<td>50</td>
<td>页面上拉触底事件触发时距页面底部距离，单位为px</td>
</tr>
</tbody>
</table>
<pre><code class="lang-json">{
  <span class="hljs-string">"navigationBarBackgroundColor"</span>: <span class="hljs-string">"#ffffff"</span>,
  <span class="hljs-string">"navigationBarTextStyle"</span>: <span class="hljs-string">"black"</span>,
  <span class="hljs-string">"navigationBarTitleText"</span>: <span class="hljs-string">"微信接口功能演示"</span>,
  <span class="hljs-string">"backgroundColor"</span>: <span class="hljs-string">"#eeeeee"</span>,
  <span class="hljs-string">"backgroundTextStyle"</span>: <span class="hljs-string">"light"</span>
}
</code></pre>

                                
                                </section>
                            
    </div>
    
</div>

                        
</body>
</html>
