<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <title>地图</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../website.css">
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
  
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h4 id="map">map</h4>
<p>地图。</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td id="地图-longitude">longitude</td>
<td>Number</td>
<td></td>
<td>中心经度</td>
<td></td>
</tr>
<tr>
<td id="地图-latitude">latitude</td>
<td>Number</td>
<td></td>
<td>中心纬度</td>
<td></td>
</tr>
<tr>
<td id="地图-scale">scale</td>
<td>Number</td>
<td>16</td>
<td>缩放级别，取值范围为5-18</td>
<td></td>
</tr>
<tr>
<td id="地图-markers">markers</td>
<td>Array</td>
<td></td>
<td>标记点</td>
<td></td>
</tr>
<tr>
<td id="地图-covers">covers</td>
<td>Array</td>
<td></td>
<td><strong>即将移除，请使用 markers</strong></td>
<td></td>
</tr>
<tr>
<td id="地图-polyline">polyline</td>
<td>Array</td>
<td></td>
<td>路线</td>
<td></td>
</tr>
<tr>
<td id="地图-circles">circles</td>
<td>Array</td>
<td></td>
<td>圆</td>
<td></td>
</tr>
<tr>
<td id="地图-controls">controls</td>
<td>Array</td>
<td></td>
<td>控件</td>
<td></td>
</tr>
<tr>
<td id="地图-include-points">include-points</td>
<td>Array</td>
<td></td>
<td>缩放视野以包含所有给定的坐标点</td>
<td></td>
</tr>
<tr>
<td id="地图-show-location">show-location</td>
<td>Boolean</td>
<td></td>
<td>显示带有方向的当前定位点</td>
<td></td>
</tr>
<tr>
<td id="地图-bindmarkertap">bindmarkertap</td>
<td>EventHandle</td>
<td></td>
<td>点击标记点时触发</td>
<td></td>
</tr>
<tr>
<td id="地图-bindcallouttap">bindcallouttap</td>
<td>EventHandle</td>
<td></td>
<td>点击标记点对应的气泡时触发</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td id="地图-bindcontroltap">bindcontroltap</td>
<td>EventHandle</td>
<td></td>
<td>点击控件时触发</td>
<td></td>
</tr>
<tr>
<td id="地图-bindregionchange">bindregionchange</td>
<td>EventHandle</td>
<td></td>
<td>视野发生变化时触发</td>
<td></td>
</tr>
<tr>
<td id="地图-bindtap">bindtap</td>
<td>EventHandle</td>
<td></td>
<td>点击地图时触发</td>
<td></td>
</tr>
<tr>
<td id="地图-bindupdated">bindupdated</td>
<td>EventHandle</td>
<td></td>
<td>在地图渲染更新完成时触发</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
</tbody>
</table>
<p><strong> 注意: covers 属性即将移除，请使用 markers 替代 </strong></p>
<h5 id="markers">markers</h5>
<p>标记点用于在地图上显示标记的位置</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>必填</th>
<th>备注</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>标记点id</td>
<td>Number</td>
<td>否</td>
<td>marker点击事件回调会返回此id。<strong>建议为每个marker设置上Number类型id，保证更新marker时有更好的性能。</strong></td>
<td></td>
</tr>
<tr>
<td>latitude</td>
<td>纬度</td>
<td>Number</td>
<td>是</td>
<td>浮点数，范围 -90 ~ 90</td>
<td></td>
</tr>
<tr>
<td>longitude</td>
<td>经度</td>
<td>Number</td>
<td>是</td>
<td>浮点数，范围 -180 ~ 180</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>标注点名</td>
<td>String</td>
<td>否</td>
<td></td>
<td></td>
</tr>
<tr>
<td>iconPath</td>
<td>显示的图标</td>
<td>String</td>
<td>是</td>
<td>项目目录下的图片路径，支持相对路径写法，以'/'开头则表示相对小程序根目录；也支持临时路径</td>
<td></td>
</tr>
<tr>
<td>rotate</td>
<td>旋转角度</td>
<td>Number</td>
<td>否</td>
<td>顺时针旋转的角度，范围 0 ~ 360，默认为 0</td>
<td></td>
</tr>
<tr>
<td>alpha</td>
<td>标注的透明度</td>
<td>Number</td>
<td>否</td>
<td>默认1，无透明</td>
<td></td>
</tr>
<tr>
<td>width</td>
<td>标注图标宽度</td>
<td>Number</td>
<td>否</td>
<td>默认为图片实际宽度</td>
<td></td>
</tr>
<tr>
<td>height</td>
<td>标注图标高度</td>
<td>Number</td>
<td>否</td>
<td>默认为图片实际高度</td>
<td></td>
</tr>
<tr>
<td>callout</td>
<td>自定义标记点上方的气泡窗口</td>
<td>Object</td>
<td>否</td>
<td>支持的属性见下表，可识别换行符。</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>label</td>
<td>为标记点旁边增加标签</td>
<td>Object</td>
<td>否</td>
<td>支持的属性见下表，可识别换行符。</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>anchor</td>
<td>经纬度在标注图标的锚点，默认底边中点</td>
<td>Object</td>
<td>否</td>
<td>{x, y}，x表示横向(0-1)，y表示竖向(0-1)。{x: .5, y: 1} 表示底边中点</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
</tbody>
</table>
<h5 id="marker-上的气泡-callout">marker 上的气泡 callout</h5>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>content</td>
<td>文本</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>color</td>
<td>文本颜色</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>fontSize</td>
<td>文字大小</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>borderRadius</td>
<td>callout边框圆角</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>bgColor</td>
<td>背景色</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>padding</td>
<td>文本边缘留白</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>display</td>
<td>'BYCLICK':点击显示; 'ALWAYS':常显</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>textAlign</td>
<td>文本对齐方式。有效值: left, right, center</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
</tbody>
</table>
<h5 id="marker-上的气泡-label">marker 上的气泡 label</h5>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>content</td>
<td>文本</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>color</td>
<td>文本颜色</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>fontSize</td>
<td>文字大小</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>x</td>
<td>label的坐标，原点是 marker 对应的经纬度</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>y</td>
<td>label的坐标，原点是 marker 对应的经纬度</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>borderWidth</td>
<td>边框宽度</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
<tr>
<td>borderColor</td>
<td>边框颜色</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
<tr>
<td>borderRadius</td>
<td>边框圆角</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
<tr>
<td>bgColor</td>
<td>背景色</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
<tr>
<td>padding</td>
<td>文本边缘留白</td>
<td>Number</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
<tr>
<td>textAlign</td>
<td>文本对齐方式。有效值: left, right, center</td>
<td>String</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
</tbody>
</table>
<h5 id="polyline">polyline</h5>
<p>指定一系列坐标点，从数组第一项连线至最后一项</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>必填</th>
<th>备注</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>points</td>
<td>经纬度数组</td>
<td>Array</td>
<td>是</td>
<td>[{latitude: 0, longitude: 0}]</td>
<td></td>
</tr>
<tr>
<td>color</td>
<td>线的颜色</td>
<td>String</td>
<td>否</td>
<td>8位十六进制表示，后两位表示alpha值，如：#000000AA</td>
<td></td>
</tr>
<tr>
<td>width</td>
<td>线的宽度</td>
<td>Number</td>
<td>否</td>
<td></td>
<td></td>
</tr>
<tr>
<td>dottedLine</td>
<td>是否虚线</td>
<td>Boolean</td>
<td>否</td>
<td>默认false</td>
<td></td>
</tr>
<tr>
<td>arrowLine</td>
<td>带箭头的线</td>
<td>Boolean</td>
<td>否</td>
<td>默认false，开发者工具暂不支持该属性</td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>arrowIconPath</td>
<td>更换箭头图标</td>
<td>String</td>
<td>否</td>
<td>在arrowLine为true时生效</td>
<td><a href="../framework/compatibility.html" title="基础库 1.6.0 开始支持，低版本需做兼容处理。">1.6.0</a></td>
</tr>
<tr>
<td>borderColor</td>
<td>线的边框颜色</td>
<td>String</td>
<td>否</td>
<td></td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
<tr>
<td>borderWidth</td>
<td>线的厚度</td>
<td>Number</td>
<td>否</td>
<td></td>
<td><a href="../framework/compatibility.html" title="基础库 1.2.0 开始支持，低版本需做兼容处理。">1.2.0</a></td>
</tr>
</tbody>
</table>
<h5 id="circles">circles</h5>
<p>在地图上显示圆</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>必填</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>latitude</td>
<td>纬度</td>
<td>Number</td>
<td>是</td>
<td>浮点数，范围 -90 ~ 90</td>
</tr>
<tr>
<td>longitude</td>
<td>经度</td>
<td>Number</td>
<td>是</td>
<td>浮点数，范围 -180 ~ 180</td>
</tr>
<tr>
<td>color</td>
<td>描边的颜色</td>
<td>String</td>
<td>否</td>
<td>8位十六进制表示，后两位表示alpha值，如：#000000AA</td>
</tr>
<tr>
<td>fillColor</td>
<td>填充颜色</td>
<td>String</td>
<td>否</td>
<td>8位十六进制表示，后两位表示alpha值，如：#000000AA</td>
</tr>
<tr>
<td>radius</td>
<td>半径</td>
<td>Number</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>strokeWidth</td>
<td>描边的宽度</td>
<td>Number</td>
<td>否</td>
</tr>
</tbody>
</table>
<h5 id="controls">controls</h5>
<p>在地图上显示控件，控件不随着地图移动</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>必填</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>控件id</td>
<td>Number</td>
<td>否</td>
<td>在控件点击事件回调会返回此id</td>
</tr>
<tr>
<td>position</td>
<td>控件在地图的位置</td>
<td>Object</td>
<td>是</td>
<td>控件相对地图位置</td>
</tr>
<tr>
<td>iconPath</td>
<td>显示的图标</td>
<td>String</td>
<td>是</td>
<td>项目目录下的图片路径，支持相对路径写法，以'/'开头则表示相对小程序根目录；也支持临时路径</td>
</tr>
<tr>
<td>clickable</td>
<td>是否可点击</td>
<td>Boolean</td>
<td>否</td>
<td>默认不可点击</td>
</tr>
</tbody>
</table>
<h6 id="position">position</h6>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
<th>类型</th>
<th>必填</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>left</td>
<td>距离地图的左边界多远</td>
<td>Number</td>
<td>否</td>
<td>默认为0</td>
</tr>
<tr>
<td>top</td>
<td>距离地图的上边界多远</td>
<td>Number</td>
<td>否</td>
<td>默认为0</td>
</tr>
<tr>
<td>width</td>
<td>控件宽度</td>
<td>Number</td>
<td>否</td>
<td>默认为图片宽度</td>
</tr>
<tr>
<td>height</td>
<td>控件高度</td>
<td>Number</td>
<td>否</td>
<td>默认为图片高度</td>
</tr>
</tbody>
</table>
<p>地图组件的经纬度必填, 如果不填经纬度则默认值是北京的经纬度。</p>
<p><strong>示例：</strong></p>
<p><a href="wechatide://minicode/3uVxpmmT6wY9" target="_blank">在开发者工具中预览效果</a></p>
<pre><code class="lang-html"><span class="hljs-comment"><!-- map.wxml --></span>
<span class="hljs-tag"><<span class="hljs-name">map</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span> <span class="hljs-attr">longitude</span>=<span class="hljs-string">"113.324520"</span> <span class="hljs-attr">latitude</span>=<span class="hljs-string">"23.099994"</span> <span class="hljs-attr">scale</span>=<span class="hljs-string">"14"</span> <span class="hljs-attr">controls</span>=<span class="hljs-string">"{{controls}}"</span> <span class="hljs-attr">bindcontroltap</span>=<span class="hljs-string">"controltap"</span> <span class="hljs-attr">markers</span>=<span class="hljs-string">"{{markers}}"</span> <span class="hljs-attr">bindmarkertap</span>=<span class="hljs-string">"markertap"</span> <span class="hljs-attr">polyline</span>=<span class="hljs-string">"{{polyline}}"</span> <span class="hljs-attr">bindregionchange</span>=<span class="hljs-string">"regionchange"</span> <span class="hljs-attr">show-location</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; height: 300px;"</span>></span><span class="hljs-tag"><!--<span class="hljs-name"-->map</span>>
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-comment">// map.js</span>
Page({
  data: {
    markers: [{
      iconPath: <span class="hljs-string">"/resources/others.png"</span>,
      id: <span class="hljs-number">0</span>,
      latitude: <span class="hljs-number">23.099994</span>,
      longitude: <span class="hljs-number">113.324520</span>,
      width: <span class="hljs-number">50</span>,
      height: <span class="hljs-number">50</span>
    }],
    polyline: [{
      points: [{
        longitude: <span class="hljs-number">113.3245211</span>,
        latitude: <span class="hljs-number">23.10229</span>
      }, {
        longitude: <span class="hljs-number">113.324520</span>,
        latitude: <span class="hljs-number">23.21229</span>
      }],
      color:<span class="hljs-string">"#FF0000DD"</span>,
      width: <span class="hljs-number">2</span>,
      dottedLine: <span class="hljs-literal">true</span>
    }],
    controls: [{
      id: <span class="hljs-number">1</span>,
      iconPath: <span class="hljs-string">'/resources/location.png'</span>,
      position: {
        left: <span class="hljs-number">0</span>,
        top: <span class="hljs-number">300</span> - <span class="hljs-number">50</span>,
        width: <span class="hljs-number">50</span>,
        height: <span class="hljs-number">50</span>
      },
      clickable: <span class="hljs-literal">true</span>
    }]
  },
  regionchange(e) {
    <span class="hljs-built_in">console</span>.log(e.type)
  },
  markertap(e) {
    <span class="hljs-built_in">console</span>.log(e.markerId)
  },
  controltap(e) {
    <span class="hljs-built_in">console</span>.log(e.controlId)
  }
})
</code></pre>
<p>相关api：<a href="../api/api-map.html">wx.createMapContext</a></p>
<h5 id="bug--tip">Bug & Tip</h5>
<ol>
<li><code>tip</code>: <code>map</code> 组件是由客户端创建的原生组件，它的层级是最高的，不能通过 z-index 控制层级。</li>
<li><code>tip</code>: 请勿在 <code>scroll-view</code>、<code>swiper</code>、<code>picker-view</code>、<code>movable-view</code> 中使用 <code>map</code> 组件。</li>
<li><code>tip</code>: <code>css</code> 动画对 <code>map</code> 组件无效。</li>
<li><code>tip</code>: <code>map</code> 组件使用的经纬度是火星坐标系，调用 <code>wx.getLocation</code> 接口需要指定 <code>type</code> 为 <code>gcj02</code></li>
</ol>

                                
                                </section>
                            
    </div>
    
</div>

                        


</body></html>