<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>全局配置</title>
  <link rel="stylesheet" href="../../../../../../style.css" />
  <link rel="stylesheet" href="../../../../../../website.css" />
  <style type="text/css">
    body {
      padding: 1em;
    }
  </style>
</head>
<body>
   <div id="docContent"><div class="content custom"><h1 id="全局配置"><a href="#全局配置" aria-hidden="true" class="header-anchor">#</a> 全局配置</h1> <p>小程序根目录下的 <code>app.json</code> 文件用来对微信小程序进行全局配置。文件内容为一个 JSON 对象，有以下属性：</p> <h2 id="配置项"><a href="#配置项" aria-hidden="true" class="header-anchor">#</a> 配置项</h2> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>描述</th> <th>最低版本</th></tr></thead> <tbody><tr><td><a href="#entryPagePath">entryPagePath</a></td> <td>string</td> <td>否</td> <td>小程序默认启动首页</td> <td></td></tr> <tr><td><a href="#pages">pages</a></td> <td>string[]</td> <td>是</td> <td>页面路径列表</td> <td></td></tr> <tr><td><a href="#window">window</a></td> <td>Object</td> <td>否</td> <td>全局的默认窗口表现</td> <td></td></tr> <tr><td><a href="#tabBar">tabBar</a></td> <td>Object</td> <td>否</td> <td>底部 <code>tab</code> 栏的表现</td> <td></td></tr> <tr><td><a href="#networkTimeout">networkTimeout</a></td> <td>Object</td> <td>否</td> <td>网络超时时间</td> <td></td></tr> <tr><td><a href="#debug">debug</a></td> <td>boolean</td> <td>否</td> <td>是否开启 debug 模式，默认关闭</td> <td></td></tr> <tr><td><a href="#functionalPages">functionalPages</a></td> <td>boolean</td> <td>否</td> <td>是否启用插件功能页，默认关闭</td> <td><a href="../../framework/compatibility.html">2.1.0</a></td></tr> <tr><td><a href="#subpackages">subpackages</a></td> <td>Object[]</td> <td>否</td> <td>分包结构配置</td> <td><a href="../../framework/compatibility.html">1.7.3</a></td></tr> <tr><td><a href="#workers">workers</a></td> <td>string</td> <td>否</td> <td><code>Worker</code> 代码放置的目录</td> <td><a href="../../framework/compatibility.html">1.9.90</a></td></tr> <tr><td><a href="#requiredBackgroundModes">requiredBackgroundModes</a></td> <td>string[]</td> <td>否</td> <td>需要在后台使用的能力，如「音乐播放」</td> <td></td></tr> <tr><td><a href="#plugins">plugins</a></td> <td>Object</td> <td>否</td> <td>使用到的插件</td> <td><a href="../../framework/compatibility.html">1.9.6</a></td></tr> <tr><td><a href="#preloadRule">preloadRule</a></td> <td>Object</td> <td>否</td> <td>分包预下载规则</td> <td><a href="../../framework/compatibility.html">2.3.0</a></td></tr> <tr><td><a href="#resizable">resizable</a></td> <td>boolean</td> <td>否</td> <td>PC 小程序是否支持用户任意改变窗口大小（包括最大化窗口）；iPad 小程序是否支持屏幕旋转。默认关闭</td> <td><a href="../../framework/compatibility.html">2.3.0</a></td></tr> <tr><td><a href="#usingComponents">usingComponents</a></td> <td>Object</td> <td>否</td> <td>全局<a href="/miniprogram/dev/framework/custom-component/">自定义组件</a>配置</td> <td>开发者工具 1.02.1810190</td></tr> <tr><td><a href="#permission">permission</a></td> <td>Object</td> <td>否</td> <td>小程序接口权限相关设置</td> <td>微信客户端 7.0.0</td></tr> <tr><td><a href="#sitemapLocation">sitemapLocation</a></td> <td>string</td> <td>是</td> <td>指明 sitemap.json 的位置</td> <td></td></tr> <tr><td><a href="#style">style</a></td> <td>string</td> <td>否</td> <td>指定使用升级后的weui样式</td> <td><a href="../../framework/compatibility.html">2.8.0</a></td></tr> <tr><td><a href="#useextendedlib">useExtendedLib</a></td> <td>Object</td> <td>否</td> <td>指定需要引用的扩展库</td> <td><a href="../../framework/compatibility.html">2.2.1</a></td></tr> <tr><td><a href="#entranceDeclare">entranceDeclare</a></td> <td>Object</td> <td>否</td> <td>微信消息用小程序打开</td> <td>微信客户端7.0.9</td></tr> <tr><td><a href="#darkmode">darkmode</a></td> <td>boolean</td> <td>否</td> <td>小程序支持 DarkMode</td> <td><a href="../../framework/compatibility.html">2.11.0</a></td></tr> <tr><td><a href="#themeLocation">themeLocation</a></td> <td>string</td> <td>否</td> <td>指明 theme.json 的位置，darkmode为true为必填</td> <td>开发者工具 1.03.2004271</td></tr> <tr><td><a href="#lazyCodeLoading">lazyCodeLoading</a></td> <td>string</td> <td>否</td> <td>配置自定义组件代码按需注入</td> <td><a href="../../framework/compatibility.html">2.11.1</a></td></tr> <tr><td><a href="#singlePage">singlePage</a></td> <td>Object</td> <td>否</td> <td>单页模式相关配置</td> <td><a href="../../framework/compatibility.html">2.12.0</a></td></tr></tbody></table></div><h3 id="entryPagePath"><a href="#entryPagePath" aria-hidden="true" class="header-anchor">#</a> entryPagePath</h3> <p>指定小程序的默认启动路径（首页），常见情景是从微信聊天列表页下拉启动、小程序列表启动等。如果不填，将默认为 <code>pages</code> 列表的第一项。不支持带页面路径参数。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"entryPagePath"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="pages"><a href="#pages" aria-hidden="true" class="header-anchor">#</a> pages</h3> <p>用于指定小程序由哪些页面组成，每一项都对应一个页面的 路径（含文件名） 信息。文件名不需要写文件后缀，框架会自动去寻找对应位置的 <code>.json</code>, <code>.js</code>, <code>.wxml</code>, <code>.wxss</code> 四个文件进行处理。</p> <p>未指定 <code>entryPagePath</code> 时，数组的第一项代表小程序的初始页面（首页）。</p> <p><strong>小程序中新增/减少页面，都需要对 pages 数组进行修改。</strong></p> <p>如开发目录为：</p> <div class="language- extra-class"><pre class="language-text"><code>├── app.js
├── app.json
├── app.wxss
├── pages
│&nbsp;&nbsp; │── index
│&nbsp;&nbsp; │   ├── index.wxml
│&nbsp;&nbsp; │   ├── index.js
│&nbsp;&nbsp; │   ├── index.json
│&nbsp;&nbsp; │   └── index.wxss
│&nbsp;&nbsp; └── logs
│&nbsp;&nbsp;     ├── logs.wxml
│&nbsp;&nbsp;     └── logs.js
└── utils
</code></pre></div><p>则需要在 app.json 中写</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pages/index/index"</span><span class="token punctuation">,</span> <span class="token string">"pages/logs/logs"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="window"><a href="#window" aria-hidden="true" class="header-anchor">#</a> window</h3> <p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>描述</th> <th>最低版本</th></tr></thead> <tbody><tr><td>navigationBarBackgroundColor</td> <td>HexColor</td> <td>#000000</td> <td>导航栏背景颜色，如 <code>#000000</code></td> <td></td></tr> <tr><td>navigationBarTextStyle</td> <td>string</td> <td>white</td> <td>导航栏标题颜色，仅支持 <code>black</code> / <code>white</code></td> <td></td></tr> <tr><td>navigationBarTitleText</td> <td>string</td> <td></td> <td>导航栏标题文字内容</td> <td></td></tr> <tr><td>navigationStyle</td> <td>string</td> <td>default</td> <td>导航栏样式，仅支持以下值：<br><code>default</code> 默认样式<br> <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。参见注 2。</td> <td>iOS/Android 微信客户端 6.6.0，Windows 微信客户端不支持</td></tr> <tr><td>backgroundColor</td> <td>HexColor</td> <td>#ffffff</td> <td>窗口的背景色</td> <td></td></tr> <tr><td>backgroundTextStyle</td> <td>string</td> <td>dark</td> <td>下拉 loading 的样式，仅支持 <code>dark</code> / <code>light</code></td> <td></td></tr> <tr><td>backgroundColorTop</td> <td>string</td> <td>#ffffff</td> <td>顶部窗口的背景色，仅 iOS 支持</td> <td>微信客户端 6.5.16</td></tr> <tr><td>backgroundColorBottom</td> <td>string</td> <td>#ffffff</td> <td>底部窗口的背景色，仅 iOS 支持</td> <td>微信客户端 6.5.16</td></tr> <tr><td>enablePullDownRefresh</td> <td>boolean</td> <td>false</td> <td>是否开启全局的下拉刷新。<br>详见 <a href="../api/Page.html#onpulldownrefresh">Page.onPullDownRefresh</a></td> <td></td></tr> <tr><td>onReachBottomDistance</td> <td>number</td> <td>50</td> <td>页面上拉触底事件触发时距页面底部距离，单位为 px。<br>详见 <a href="../api/Page.html#onreachbottom">Page.onReachBottom</a></td> <td></td></tr> <tr><td>pageOrientation</td> <td>string</td> <td>portrait</td> <td>屏幕旋转设置，支持 <code>auto</code> / <code>portrait</code> / <code>landscape</code> <br>详见 <a href="../../framework/view/resizable.html">响应显示区域变化</a></td> <td><a href="../../framework/compatibility.html">2.4.0</a> (auto) / <a href="../../framework/compatibility.html">2.5.0</a> (landscape)</td></tr></tbody></table></div><ul><li>注 1：HexColor（十六进制颜色值），如"#ff00ff"</li> <li>注 2：关于<code>navigationStyle</code> <ul><li>iOS/Android 客户端 7.0.0 以下版本，<code>navigationStyle</code> 只在 <code>app.json</code> 中生效。</li> <li>iOS/Android 客户端 6.7.2 版本开始，<code>navigationStyle: custom</code> 对 <a href="../../component/web-view.html">web-view</a> 组件无效</li> <li>开启 custom 后，低版本客户端需要做好兼容。开发者工具基础库版本切到 1.7.0（不代表最低版本，只供调试用）可方便切到旧视觉</li> <li>Windows 客户端 3.0 及以上版本，为了给用户提供更符合桌面软件的使用体验，统一了小程序窗口的导航栏，<code>navigationStyle: custom</code> 不再生效</li></ul></li></ul> <p>如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"window"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"微信接口功能演示"</span><span class="token punctuation">,</span>
    <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#eeeeee"</span><span class="token punctuation">,</span>
    <span class="token property">"backgroundTextStyle"</span><span class="token operator">:</span> <span class="token string">"light"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/config.344358b1.jpg" alt="" style="width:600px"></p> <h3 id="tabBar"><a href="#tabBar" aria-hidden="true" class="header-anchor">#</a> tabBar</h3> <p>如果小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>描述</th> <th>最低版本</th></tr></thead> <tbody><tr><td>color</td> <td>HexColor</td> <td>是</td> <td></td> <td>tab 上的文字默认颜色，仅支持十六进制颜色</td> <td></td></tr> <tr><td>selectedColor</td> <td>HexColor</td> <td>是</td> <td></td> <td>tab 上的文字选中时的颜色，仅支持十六进制颜色</td> <td></td></tr> <tr><td>backgroundColor</td> <td>HexColor</td> <td>是</td> <td></td> <td>tab 的背景色，仅支持十六进制颜色</td> <td></td></tr> <tr><td>borderStyle</td> <td>string</td> <td>否</td> <td>black</td> <td>tabbar 上边框的颜色， 仅支持 <code>black</code> / <code>white</code></td> <td></td></tr> <tr><td>list</td> <td>Array</td> <td>是</td> <td></td> <td>tab 的列表，详见 <code>list</code> 属性说明，最少 2 个、最多 5 个 tab</td> <td></td></tr> <tr><td>position</td> <td>string</td> <td>否</td> <td>bottom</td> <td>tabBar 的位置，仅支持 <code>bottom</code> / <code>top</code></td> <td></td></tr> <tr><td>custom</td> <td>boolean</td> <td>否</td> <td>false</td> <td>自定义 tabBar，见<a href="../../framework/ability/custom-tabbar.html">详情</a></td> <td><a href="../../framework/compatibility.html">2.5.0</a></td></tr></tbody></table></div><p>其中 list 接受一个数组，<strong>只能配置最少 2 个、最多 5 个 tab</strong>。tab 按数组的顺序排序，每个项都是一个对象，其属性值如下：</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>pagePath</td> <td>string</td> <td>是</td> <td>页面路径，必须在 pages 中先定义</td></tr> <tr><td>text</td> <td>string</td> <td>是</td> <td>tab 上按钮文字</td></tr> <tr><td>iconPath</td> <td>string</td> <td>否</td> <td>图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。<br><strong>当 <code>position</code> 为 <code>top</code> 时，不显示 icon。</strong></td></tr> <tr><td>selectedIconPath</td> <td>string</td> <td>否</td> <td>选中时的图片路径，icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。<br><strong>当 <code>position</code> 为 <code>top</code> 时，不显示 icon。</strong></td></tr></tbody></table></div><p><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/tabbar.ce1b3c5b.png" alt=""></p> <h3 id="networkTimeout"><a href="#networkTimeout" aria-hidden="true" class="header-anchor">#</a> networkTimeout</h3> <p>各类网络请求的超时时间，单位均为毫秒。</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>request</td> <td>number</td> <td>否</td> <td>60000</td> <td><a href="../../api/network/request/wx.request.html">wx.request</a> 的超时时间，单位：毫秒。</td></tr> <tr><td>connectSocket</td> <td>number</td> <td>否</td> <td>60000</td> <td><a href="../../api/network/websocket/wx.connectSocket.html">wx.connectSocket</a> 的超时时间，单位：毫秒。</td></tr> <tr><td>uploadFile</td> <td>number</td> <td>否</td> <td>60000</td> <td><a href="../../api/network/upload/wx.uploadFile.html">wx.uploadFile</a> 的超时时间，单位：毫秒。</td></tr> <tr><td>downloadFile</td> <td>number</td> <td>否</td> <td>60000</td> <td><a href="../../api/network/download/wx.downloadFile.html">wx.downloadFile</a> 的超时时间，单位：毫秒。</td></tr></tbody></table></div><h3 id="debug"><a href="#debug" aria-hidden="true" class="header-anchor">#</a> debug</h3> <p>可以在开发者工具中开启 <code>debug</code> 模式，在开发者工具的控制台面板，调试信息以 <code>info</code> 的形式给出，其信息有 Page 的注册，页面路由，数据更新，事件触发等。可以帮助开发者快速定位一些常见的问题。</p> <h3 id="functionalPages"><a href="#functionalPages" aria-hidden="true" class="header-anchor">#</a> functionalPages</h3> <blockquote><p>基础库 2.1.0 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>插件所有者小程序需要设置这一项来启用<a href="./../../framework/plugin/functional-pages.html">插件功能页</a>。</p> <h3 id="subpackages"><a href="#subpackages" aria-hidden="true" class="header-anchor">#</a> subpackages</h3> <blockquote><p>微信客户端 6.6.0 ，基础库 1.7.3 及以上版本支持</p></blockquote> <p>启用<a href="./../../framework/subpackages.html">分包加载</a>时，声明项目分包结构。</p> <blockquote><p>写成 subPackages 也支持。</p></blockquote> <h3 id="workers"><a href="#workers" aria-hidden="true" class="header-anchor">#</a> workers</h3> <blockquote><p>基础库 1.9.90 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>使用 <a href="./../../framework/workers.html">Worker</a> 处理多线程任务时，设置 <code>Worker</code> 代码放置的目录</p> <h3 id="requiredBackgroundModes"><a href="#requiredBackgroundModes" aria-hidden="true" class="header-anchor">#</a> requiredBackgroundModes</h3> <blockquote><p>微信客户端 6.7.2 及以上版本支持</p></blockquote> <p>申明需要后台运行的能力，类型为数组。目前支持以下项目：</p> <ul><li><code>audio</code>: 后台音乐播放</li> <li><code>location</code>: 后台定位</li></ul> <p>如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pages/index/index"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"requiredBackgroundModes"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"audio"</span><span class="token punctuation">,</span> <span class="token string">"location"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注：在此处申明了后台运行的接口，开发版和体验版上可以直接生效，正式版还需通过审核。</p> <h3 id="plugins"><a href="#plugins" aria-hidden="true" class="header-anchor">#</a> plugins</h3> <blockquote><p>基础库 1.9.6 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>声明小程序需要使用的<a href="./../../framework/plugin/using.html">插件</a>。</p> <h3 id="preloadRule"><a href="#preloadRule" aria-hidden="true" class="header-anchor">#</a> preloadRule</h3> <blockquote><p>基础库 2.3.0 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>声明<a href="./../../framework/subpackages/preload.html">分包预下载</a>的规则。</p> <h3 id="resizable"><a href="#resizable" aria-hidden="true" class="header-anchor">#</a> resizable</h3> <blockquote><p>基础库 2.3.0 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>在 iPad 上运行的小程序可以设置支持<a href="../../framework/view/resizable.html">屏幕旋转</a>。</p> <p>在 PC 上运行的小程序，用户可以按照任意比例拖动窗口大小，也可以在小程序菜单中最大化窗口</p> <h3 id="usingComponents"><a href="#usingComponents" aria-hidden="true" class="header-anchor">#</a> usingComponents</h3> <blockquote><p>开发者工具 1.02.1810190 及以上版本支持</p></blockquote> <p>在此处声明的自定义组件视为全局自定义组件，在小程序内的页面或自定义组件中可以直接使用而无需再声明。</p> <h3 id="permission"><a href="#permission" aria-hidden="true" class="header-anchor">#</a> permission</h3> <blockquote><p>微信客户端 7.0.0 及以上版本支持</p></blockquote> <p>小程序<a href="../../framework/open-ability/authorize.html">接口权限</a>相关设置。字段类型为 <code>Object</code>，结构为：</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>描述</th></tr></thead> <tbody><tr><td>scope.userLocation</td> <td>PermissionObject</td> <td>否</td> <td></td> <td>位置相关权限声明</td></tr></tbody></table></div><p><strong>PermissionObject 结构</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>desc</td> <td>string</td> <td>是</td> <td></td> <td>小程序获取权限时展示的接口用途说明。最长 30 个字符</td></tr></tbody></table></div><p>如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pages/index/index"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"permission"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"scope.userLocation"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">"你的位置信息将用于小程序位置接口的效果展示"</span> <span class="token comment">// 高速公路行驶持续后台定位</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/permission-desc.496b775d.jpeg" alt=""></p> <h3 id="sitemapLocation"><a href="#sitemapLocation" aria-hidden="true" class="header-anchor">#</a> sitemapLocation</h3> <p>指明 <a href="./sitemap.html">sitemap.json</a> 的位置；默认为 'sitemap.json' 即在 app.json 同级目录下名字的 <code>sitemap.json</code> 文件</p> <h2 id="配置示例"><a href="#配置示例" aria-hidden="true" class="header-anchor">#</a> 配置示例</h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pages/index/index"</span><span class="token punctuation">,</span> <span class="token string">"pages/logs/index"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"window"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"Demo"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"首页"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/logs/logs"</span><span class="token punctuation">,</span>
        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"日志"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"networkTimeout"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"request"</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token property">"downloadFile"</span><span class="token operator">:</span> <span class="token number">10000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"debug"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="style"><a href="#style" aria-hidden="true" class="header-anchor">#</a> style</h3> <blockquote><p>基础库 2.8.0 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <p>微信客户端 7.0 开始，UI 界面进行了大改版。小程序也进行了基础组件的样式升级。app.json 中配置 <code>"style": "v2"</code>可表明启用新版的组件样式。</p> <p>本次改动涉及的组件有 <code>button icon radio checkbox switch slider</code>。可前往小程序示例进行体验。</p> <h3 id="useExtendedLib"><a href="#useExtendedLib" aria-hidden="true" class="header-anchor">#</a> useExtendedLib</h3> <blockquote><p>基础库 2.2.1 开始支持，低版本需做<a href="../../framework/compatibility.html">兼容处理</a>。</p></blockquote> <blockquote><p>最新的 nightly 版开发者工具开始支持，同时基础库从支持 npm 的版本（2.2.1）起支持</p></blockquote> <p>指定需要引用的扩展库。目前支持以下项目：</p> <ul><li><code>kbone</code>: <a href="https://developers.weixin.qq.com/miniprogram/dev/extended/kbone/" target="_blank" rel="noopener noreferrer">多端开发框架<span></span></a></li> <li><code>weui</code>: <a href="https://developers.weixin.qq.com/miniprogram/dev/extended/weui/" target="_blank" rel="noopener noreferrer">WeUI 组件库<span></span></a></li></ul> <p>指定后，相当于引入了对应扩展库相关的最新版本的 npm 包，同时也不占用小程序的包体积。rc工具版本支持分包引用。用法如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"useExtendedLib"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"kbone"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"weui"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="entranceDeclare"><a href="#entranceDeclare" aria-hidden="true" class="header-anchor">#</a> entranceDeclare</h3> <blockquote><p>微信客户端 7.0.9 及以上版本支持，iOS 暂不支持</p></blockquote> <p>聊天位置消息用打车类小程序打开，<a href="../../framework/open-ability/location-message.html">详情参考</a>。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">"entranceDeclare"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"locationMessage"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"foo=bar"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="darkmode"><a href="#darkmode" aria-hidden="true" class="header-anchor">#</a> darkmode</h3> <blockquote><p>开发者工具 1.03.2004271 及以上版本支持，基础库 2.11.0 及以上版本支持</p></blockquote> <p>微信iOS客户端 7.0.12 版本、Android客户端 7.0.13 版本正式支持 DarkMode，可通过配置<code>"darkmode": true</code>表示当前小程序可适配 DarkMode，所有基础组件均会根据系统主题展示不同的默认样式，navigation bar 和 tab bar 也会根据开发者的配置自动切换。</p> <p>配置后，请根据<a href="./../../framework/ability/darkmode.html">DarkMode 适配指南</a>自行完成基础样式以外的适配工作。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"darkmode"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="themeLocation"><a href="#themeLocation" aria-hidden="true" class="header-anchor">#</a> themeLocation</h3> <p>自定义 <a href="./../../framework/ability/darkmode.html#变量配置文件-theme-json">theme.json</a> 的路径，当配置<code>"darkmode":true</code>时，当前配置文件为必填项。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"themeLocation"</span><span class="token operator">:</span> <span class="token string">"/path/to/theme.json"</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="lazyCodeLoading"><a href="#lazyCodeLoading" aria-hidden="true" class="header-anchor">#</a> lazyCodeLoading</h3> <blockquote><p>基础库 2.11.1 及以上版本支持，2.11.1 以下兼容但无优化效果</p></blockquote> <p>通常情况下，在小程序启动期间，所有页面及自定义组件的代码都会进行注入，当前页面没有使用到的自定义组件和页面在注入后其实并没有被使用。</p> <p>自基础库版本 2.11.1 起，小程序支持有选择地注入必要的代码，以降低小程序的启动时间和运行时内存。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"lazyCodeLoading"</span><span class="token operator">:</span> <span class="token string">"requiredComponents"</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当配置了这一项时，小程序仅注入当前页面需要的自定义组件和页面代码，在页面中必然不会用到的自定义组件不会被加载和初始化。</p> <p><strong>注意：添加这项配置后，未使用到的代码文件将不被执行。</strong></p> <h3 id="singlePage"><a href="#singlePage" aria-hidden="true" class="header-anchor">#</a> singlePage</h3> <blockquote><p>基础库 2.11.3 及以上版本支持，目前<a href="./../../framework/ability/share/share-timeline.html">分享到朋友圈 (Beta)</a> 后打开会进入单页模式</p></blockquote> <p>单页模式相关配置</p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>描述</th></tr></thead> <tbody><tr><td>navigationBarFit</td> <td>String</td> <td>否</td> <td>默认自动调整，若原页面是自定义导航栏，则为 float，否则为 squeezed</td> <td>导航栏与页面的相交状态，值为 float 时表示导航栏浮在页面上，与页面相交；值为 squeezed 时表示页面被导航栏挤压，与页面不相交</td></tr></tbody></table></div></div></div> <!---->    
</body>
</html>
